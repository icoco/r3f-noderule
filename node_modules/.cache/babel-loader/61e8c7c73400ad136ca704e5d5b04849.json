{"ast":null,"code":"import { p as pick, _ as _objectSpread2, o as omit, s as styled, u as useInputContext, R as Row, L as Label, V as ValueInput, P as Portal, O as Overlay, c as createInternalPlugin, a as Vector, g as getVectorPlugin, b as useTransform, d as useTh, e as useDrag, f as _extends, m as multiplyStep, h as clamp, i as _objectWithoutProperties, n as normalizeKeyedNumberSettings, j as invertedRange, k as sanitizeStep, r as range, l as RangeWrapper, q as Range, I as Indicator, S as Scrubber, t as getUid, v as SpecialInputs, w as warn, x as LevaErrors, y as updateInput, z as normalizeInput, A as StyledTitle, C as Chevron, B as useInputSetters, D as Plugins, E as InputContext, F as StyledInputWrapper, G as useCanvas2d, H as useInput, J as log, K as StyledWrapper, M as StyledContent, N as useStoreContext, Q as StyledFolder, T as StyledInputRow, U as debounce, W as PanelSettingsContext, X as StoreContext, Y as mergeTheme, Z as ThemeContext, $ as register, a0 as LevaInputs, a1 as select, a2 as number$1, a3 as string, a4 as boolean } from './vector-plugin-ffba4822.esm.js';\nexport { a0 as LevaInputs, a5 as LevaStoreProvider, N as useStoreContext } from './vector-plugin-ffba4822.esm.js';\nimport v8n from 'v8n';\nimport { extend, colord, getFormat } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport { dequal } from 'dequal/lite';\nimport React, { useRef, useMemo, useLayoutEffect, useEffect, useState, useCallback, forwardRef, useImperativeHandle } from 'react';\nimport { RgbaColorPicker, RgbColorPicker } from 'react-colorful';\nimport shallow from 'zustand/shallow';\nimport { useDrag as useDrag$1 } from 'react-use-gesture';\nimport '@radix-ui/react-portal';\nimport '@radix-ui/react-tooltip';\nimport { useDropzone } from 'react-dropzone';\nimport create from 'zustand';\nimport ReactDOM from 'react-dom';\nimport merge from 'merge-value';\nimport '@stitches/react';\n\nconst join = (...args) => args.filter(Boolean).join('.');\n\nfunction getKeyPath(path) {\n  const dir = path.split('.');\n  return [dir.pop(), dir.join('.') || undefined];\n}\n\nfunction getValuesForPaths(data, paths) {\n  return Object.entries(pick(data, paths)).reduce((acc, [, {\n    value,\n    disabled,\n    key\n  }]) => {\n    acc[key] = disabled ? undefined : value;\n    return acc;\n  }, {});\n}\n\nfunction useCompareMemoize(value, deep) {\n  const ref = useRef();\n  const compare = deep ? dequal : shallow;\n\n  if (!compare(value, ref.current)) {\n    ref.current = value;\n  }\n\n  return ref.current;\n}\n\nfunction useDeepMemo(fn, deps) {\n  return useMemo(fn, useCompareMemoize(deps, true));\n}\n\nfunction useToggle(toggled) {\n  const wrapperRef = useRef(null);\n  const contentRef = useRef(null);\n  const firstRender = useRef(true);\n  useLayoutEffect(() => {\n    if (!toggled) {\n      wrapperRef.current.style.height = '0px';\n      wrapperRef.current.style.overflow = 'hidden';\n    }\n  }, []);\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      return;\n    }\n\n    let timeout;\n    const ref = wrapperRef.current;\n\n    const fixHeight = () => {\n      if (toggled) {\n        ref.style.removeProperty('height');\n        ref.style.removeProperty('overflow');\n        contentRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    };\n\n    ref.addEventListener('transitionend', fixHeight, {\n      once: true\n    });\n    const {\n      height\n    } = contentRef.current.getBoundingClientRect();\n    ref.style.height = height + 'px';\n\n    if (!toggled) {\n      ref.style.overflow = 'hidden';\n      timeout = window.setTimeout(() => ref.style.height = '0px', 50);\n    }\n\n    return () => {\n      ref.removeEventListener('transitionend', fixHeight);\n      clearTimeout(timeout);\n    };\n  }, [toggled]);\n  return {\n    wrapperRef,\n    contentRef\n  };\n}\n\nconst useVisiblePaths = store => {\n  const [paths, setPaths] = useState(store.getVisiblePaths());\n  useEffect(() => {\n    setPaths(store.getVisiblePaths());\n    const unsub = store.useStore.subscribe(setPaths, store.getVisiblePaths, shallow);\n    return () => unsub();\n  }, [store]);\n  return paths;\n};\n\nfunction useValuesForPath(store, paths, initialData) {\n  const valuesForPath = store.useStore(s => {\n    const data = _objectSpread2(_objectSpread2({}, initialData), s.data);\n\n    return getValuesForPaths(data, paths);\n  }, shallow);\n  return valuesForPath;\n}\n\nfunction usePopin(margin = 3) {\n  const popinRef = useRef(null);\n  const wrapperRef = useRef(null);\n  const [shown, setShow] = useState(false);\n  const show = useCallback(() => setShow(true), []);\n  const hide = useCallback(() => setShow(false), []);\n  useLayoutEffect(() => {\n    if (shown) {\n      const {\n        bottom,\n        top,\n        left\n      } = popinRef.current.getBoundingClientRect();\n      const {\n        height\n      } = wrapperRef.current.getBoundingClientRect();\n      const direction = bottom + height > window.innerHeight - 40 ? 'up' : 'down';\n      wrapperRef.current.style.position = 'fixed';\n      wrapperRef.current.style.zIndex = '10000';\n      wrapperRef.current.style.left = left + 'px';\n      if (direction === 'down') wrapperRef.current.style.top = bottom + margin + 'px';else wrapperRef.current.style.bottom = window.innerHeight - top + margin + 'px';\n    }\n  }, [margin, shown]);\n  return {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  };\n}\n\nextend([namesPlugin]);\nconst convertMap = {\n  rgb: 'toRgb',\n  hsl: 'toHsl',\n  hsv: 'toHsv',\n  hex: 'toHex'\n};\nv8n.extend({\n  color: () => value => colord(value).isValid()\n});\n\nconst schema$2 = o => v8n().color().test(o);\n\nfunction convert(color, {\n  format,\n  hasAlpha,\n  isString\n}) {\n  const convertFn = convertMap[format] + (isString && format !== 'hex' ? 'String' : '');\n  const result = color[convertFn]();\n  return typeof result === 'object' && !hasAlpha ? omit(result, ['a']) : result;\n}\n\nconst sanitize$2 = (v, settings) => {\n  const color = colord(v);\n  if (!color.isValid()) throw Error('Invalid color');\n  return convert(color, settings);\n};\n\nconst format$1 = (v, settings) => {\n  return convert(colord(v), _objectSpread2(_objectSpread2({}, settings), {}, {\n    isString: true,\n    format: 'hex'\n  }));\n};\n\nconst normalize$3 = ({\n  value\n}) => {\n  const _f = getFormat(value);\n\n  const format = _f === 'name' ? 'hex' : _f;\n  const hasAlpha = typeof value === 'object' ? 'a' in value : _f === 'hex' && value.length === 8 || /^(rgba)|(hsla)|(hsva)/.test(value);\n  const settings = {\n    format,\n    hasAlpha,\n    isString: typeof value === 'string'\n  };\n  return {\n    value: sanitize$2(value, settings),\n    settings\n  };\n};\n\nvar props$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$2,\n  sanitize: sanitize$2,\n  format: format$1,\n  normalize: normalize$3\n});\nconst ColorPreview = styled('div', {\n  position: 'relative',\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  overflow: 'hidden',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  backgroundColor: '#fff',\n  backgroundImage: `url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>')`,\n  $inputStyle: '',\n  $hover: '',\n  zIndex: 1,\n  variants: {\n    active: {\n      true: {\n        $inputStyle: '$accent1'\n      }\n    }\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    backgroundColor: 'currentColor',\n    zIndex: 1\n  }\n});\nconst PickerContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst PickerWrapper = styled('div', {\n  width: '$colorPickerWidth',\n  height: '$colorPickerHeight',\n  '.react-colorful': {\n    width: '100%',\n    height: '100%',\n    boxShadow: '$level2',\n    cursor: 'crosshair'\n  },\n  '.react-colorful__saturation': {\n    borderRadius: '$sm $sm 0 0'\n  },\n  '.react-colorful__alpha, .react-colorful__hue': {\n    height: 10\n  },\n  '.react-colorful__last-control': {\n    borderRadius: '0 0 $sm $sm'\n  },\n  '.react-colorful__pointer': {\n    height: 12,\n    width: 12\n  }\n});\n\nfunction convertToRgb(value, format) {\n  return format !== 'rgb' ? colord(value).toRgb() : value;\n}\n\nfunction Color({\n  value,\n  displayValue,\n  settings,\n  onUpdate\n}) {\n  const {\n    emitOnEditStart,\n    emitOnEditEnd\n  } = useInputContext();\n  const {\n    format,\n    hasAlpha\n  } = settings;\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const timer = useRef(0);\n  const [initialRgb, setInitialRgb] = useState(() => convertToRgb(value, format));\n  const ColorPicker = hasAlpha ? RgbaColorPicker : RgbColorPicker;\n\n  const showPicker = () => {\n    setInitialRgb(convertToRgb(value, format));\n    show();\n    emitOnEditStart();\n  };\n\n  const hidePicker = () => {\n    hide();\n    emitOnEditEnd();\n    window.clearTimeout(timer.current);\n  };\n\n  const hideAfterDelay = () => {\n    timer.current = window.setTimeout(hidePicker, 500);\n  };\n\n  useEffect(() => {\n    return () => window.clearTimeout(timer.current);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(ColorPreview, {\n    ref: popinRef,\n    active: shown,\n    onClick: () => showPicker(),\n    style: {\n      color: displayValue\n    }\n  }), shown && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hidePicker\n  }), React.createElement(PickerWrapper, {\n    ref: wrapperRef,\n    onMouseEnter: () => window.clearTimeout(timer.current),\n    onMouseLeave: e => e.buttons === 0 && hideAfterDelay()\n  }, React.createElement(ColorPicker, {\n    color: initialRgb,\n    onChange: onUpdate\n  }))));\n}\n\nfunction ColorComponent() {\n  const {\n    value,\n    displayValue,\n    label,\n    onChange,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(PickerContainer, null, React.createElement(Color, {\n    value: value,\n    displayValue: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate,\n    settings: settings\n  }), React.createElement(ValueInput, {\n    value: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate\n  })));\n}\n\nvar color = createInternalPlugin(_objectSpread2({\n  component: ColorComponent\n}, props$2));\n\nfunction Vector3dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }));\n}\n\nvar vector3d = createInternalPlugin(_objectSpread2({\n  component: Vector3dComponent\n}, getVectorPlugin(['x', 'y', 'z'])));\nconst JoystickTrigger = styled('div', {\n  $flexCenter: '',\n  position: 'relative',\n  backgroundColor: '$elevation3',\n  borderRadius: '$sm',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $draggable: '',\n  $hover: '',\n  '&:active': {\n    cursor: 'none'\n  },\n  '&::after': {\n    content: '\"\"',\n    backgroundColor: '$accent2',\n    height: 4,\n    width: 4,\n    borderRadius: 2\n  }\n});\nconst JoystickPlayground = styled('div', {\n  $flexCenter: '',\n  width: '$joystickWidth',\n  height: '$joystickHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  position: 'fixed',\n  zIndex: 10000,\n  overflow: 'hidden',\n  $draggable: '',\n  transform: 'translate(-50%, -50%)',\n  variants: {\n    isOutOfBounds: {\n      true: {\n        backgroundColor: '$elevation1'\n      },\n      false: {\n        backgroundColor: '$elevation3'\n      }\n    }\n  },\n  '> div': {\n    position: 'absolute',\n    $flexCenter: '',\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: '$highlight1',\n    backgroundColor: '$elevation3',\n    width: '80%',\n    height: '80%',\n    '&::after,&::before': {\n      content: '\"\"',\n      position: 'absolute',\n      zindex: 10,\n      backgroundColor: '$highlight1'\n    },\n    '&::before': {\n      width: '100%',\n      height: 1\n    },\n    '&::after': {\n      height: '100%',\n      width: 1\n    }\n  },\n  '> span': {\n    position: 'relative',\n    zindex: 100,\n    width: 10,\n    height: 10,\n    backgroundColor: '$accent2',\n    borderRadius: '50%'\n  }\n});\n\nfunction Joystick({\n  value,\n  settings,\n  onUpdate\n}) {\n  const timeout = useRef();\n  const outOfBoundsX = useRef(0);\n  const outOfBoundsY = useRef(0);\n  const stepMultiplier = useRef(1);\n  const [joystickShown, setShowJoystick] = useState(false);\n  const [isOutOfBounds, setIsOutOfBounds] = useState(false);\n  const [spanRef, set] = useTransform();\n  const joystickeRef = useRef(null);\n  const playgroundRef = useRef(null);\n  useLayoutEffect(() => {\n    if (joystickShown) {\n      const {\n        top,\n        left,\n        width,\n        height\n      } = joystickeRef.current.getBoundingClientRect();\n      playgroundRef.current.style.left = left + width / 2 + 'px';\n      playgroundRef.current.style.top = top + height / 2 + 'px';\n    }\n  }, [joystickShown]);\n  const {\n    keys: [v1, v2],\n    joystick\n  } = settings;\n  const yFactor = joystick === 'invertY' ? 1 : -1;\n  const {\n    [v1]: {\n      step: stepV1\n    },\n    [v2]: {\n      step: stepV2\n    }\n  } = settings;\n  const wpx = useTh('sizes', 'joystickWidth');\n  const hpx = useTh('sizes', 'joystickHeight');\n  const w = parseFloat(wpx) * 0.8 / 2;\n  const h = parseFloat(hpx) * 0.8 / 2;\n  const startOutOfBounds = useCallback(() => {\n    if (timeout.current) return;\n    setIsOutOfBounds(true);\n    if (outOfBoundsX.current) set({\n      x: outOfBoundsX.current * w\n    });\n    if (outOfBoundsY.current) set({\n      y: outOfBoundsY.current * -h\n    });\n    timeout.current = window.setInterval(() => {\n      onUpdate(v => {\n        const incX = stepV1 * outOfBoundsX.current * stepMultiplier.current;\n        const incY = yFactor * stepV2 * outOfBoundsY.current * stepMultiplier.current;\n        return Array.isArray(v) ? {\n          [v1]: v[0] + incX,\n          [v2]: v[1] + incY\n        } : {\n          [v1]: v[v1] + incX,\n          [v2]: v[v2] + incY\n        };\n      });\n    }, 16);\n  }, [w, h, onUpdate, set, stepV1, stepV2, v1, v2, yFactor]);\n  const endOutOfBounds = useCallback(() => {\n    window.clearTimeout(timeout.current);\n    timeout.current = undefined;\n    setIsOutOfBounds(false);\n  }, []);\n  useEffect(() => {\n    function setStepMultiplier(event) {\n      stepMultiplier.current = multiplyStep(event);\n    }\n\n    window.addEventListener('keydown', setStepMultiplier);\n    window.addEventListener('keyup', setStepMultiplier);\n    return () => {\n      window.clearTimeout(timeout.current);\n      window.removeEventListener('keydown', setStepMultiplier);\n      window.removeEventListener('keyup', setStepMultiplier);\n    };\n  }, []);\n  const bind = useDrag(({\n    first,\n    active,\n    delta: [dx, dy],\n    movement: [mx, my]\n  }) => {\n    if (first) setShowJoystick(true);\n\n    const _x = clamp(mx, -w, w);\n\n    const _y = clamp(my, -h, h);\n\n    outOfBoundsX.current = Math.abs(mx) > Math.abs(_x) ? Math.sign(mx - _x) : 0;\n    outOfBoundsY.current = Math.abs(my) > Math.abs(_y) ? Math.sign(_y - my) : 0;\n    let newX = value[v1];\n    let newY = value[v2];\n\n    if (active) {\n      if (!outOfBoundsX.current) {\n        newX += dx * stepV1 * stepMultiplier.current;\n        set({\n          x: _x\n        });\n      }\n\n      if (!outOfBoundsY.current) {\n        newY -= yFactor * dy * stepV2 * stepMultiplier.current;\n        set({\n          y: _y\n        });\n      }\n\n      if (outOfBoundsX.current || outOfBoundsY.current) startOutOfBounds();else endOutOfBounds();\n      onUpdate({\n        [v1]: newX,\n        [v2]: newY\n      });\n    } else {\n      setShowJoystick(false);\n      outOfBoundsX.current = 0;\n      outOfBoundsY.current = 0;\n      set({\n        x: 0,\n        y: 0\n      });\n      endOutOfBounds();\n    }\n  });\n  return React.createElement(JoystickTrigger, _extends({\n    ref: joystickeRef\n  }, bind()), joystickShown && React.createElement(Portal, null, React.createElement(JoystickPlayground, {\n    ref: playgroundRef,\n    isOutOfBounds: isOutOfBounds\n  }, React.createElement(\"div\", null), React.createElement(\"span\", {\n    ref: spanRef\n  }))));\n}\n\nconst Container$1 = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  variants: {\n    withJoystick: {\n      true: {\n        gridTemplateColumns: '$sizes$rowHeight auto'\n      },\n      false: {\n        gridTemplateColumns: 'auto'\n      }\n    }\n  }\n});\n\nfunction Vector2dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container$1, {\n    withJoystick: !!settings.joystick\n  }, settings.joystick && React.createElement(Joystick, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  })));\n}\n\nconst _excluded$7 = [\"joystick\"];\nconst plugin = getVectorPlugin(['x', 'y']);\n\nconst normalize$2 = _ref => {\n  let {\n    joystick = true\n  } = _ref,\n      input = _objectWithoutProperties(_ref, _excluded$7);\n\n  const {\n    value,\n    settings\n  } = plugin.normalize(input);\n  return {\n    value,\n    settings: _objectSpread2(_objectSpread2({}, settings), {}, {\n      joystick\n    })\n  };\n};\n\nvar vector2d = createInternalPlugin(_objectSpread2(_objectSpread2({\n  component: Vector2dComponent\n}, plugin), {}, {\n  normalize: normalize$2\n}));\n\nconst sanitize$1 = v => {\n  if (v === undefined) return undefined;\n\n  if (v instanceof File) {\n    try {\n      return URL.createObjectURL(v);\n    } catch (e) {\n      return undefined;\n    }\n  }\n\n  if (typeof v === 'string' && v.indexOf('blob:') === 0) return v;\n  throw Error(`Invalid image format [undefined | blob |Â File].`);\n};\n\nconst schema$1 = (_o, s) => typeof s === 'object' && 'image' in s;\n\nconst normalize$1 = ({\n  image\n}) => {\n  return {\n    value: image\n  };\n};\n\nvar props$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  sanitize: sanitize$1,\n  schema: schema$1,\n  normalize: normalize$1\n});\nconst ImageContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto 20px',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst DropZone = styled('div', {\n  $flexCenter: '',\n  overflow: 'hidden',\n  height: '$rowHeight',\n  background: '$elevation3',\n  textAlign: 'center',\n  color: 'inherit',\n  borderRadius: '$sm',\n  outline: 'none',\n  userSelect: 'none',\n  cursor: 'pointer',\n  $inputStyle: '',\n  $hover: '',\n  $focusWithin: '',\n  $active: '$accent1 $elevation1',\n  variants: {\n    isDragAccept: {\n      true: {\n        $inputStyle: '$accent1',\n        backgroundColor: '$elevation1'\n      }\n    }\n  }\n});\nconst ImagePreview = styled('div', {\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  variants: {\n    hasImage: {\n      true: {\n        cursor: 'pointer',\n        $hover: '',\n        $active: ''\n      }\n    }\n  }\n});\nconst ImageLargePreview = styled('div', {\n  $flexCenter: '',\n  width: '$imagePreviewWidth',\n  height: '$imagePreviewHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  pointerEvents: 'none',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center'\n});\nconst Instructions = styled('div', {\n  fontSize: '0.8em',\n  height: '100%',\n  padding: '$rowGap $md'\n});\nconst Remove = styled('div', {\n  $flexCenter: '',\n  top: '0',\n  right: '0',\n  marginRight: '$sm',\n  height: '100%',\n  cursor: 'pointer',\n  variants: {\n    disabled: {\n      true: {\n        color: '$elevation3',\n        cursor: 'default'\n      }\n    }\n  },\n  '&::after,&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    height: 2,\n    width: 10,\n    borderRadius: 1,\n    backgroundColor: 'currentColor'\n  },\n  '&::after': {\n    transform: 'rotate(45deg)'\n  },\n  '&::before': {\n    transform: 'rotate(-45deg)'\n  }\n});\n\nfunction ImageComponent() {\n  const {\n    label,\n    value,\n    onUpdate\n  } = useInputContext();\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) onUpdate(acceptedFiles[0]);\n  }, [onUpdate]);\n  const clear = useCallback(e => {\n    e.stopPropagation();\n    onUpdate(undefined);\n  }, [onUpdate]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragAccept\n  } = useDropzone({\n    maxFiles: 1,\n    accept: 'image/*',\n    onDrop\n  });\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(ImageContainer, null, React.createElement(ImagePreview, {\n    ref: popinRef,\n    hasImage: !!value,\n    onPointerDown: () => !!value && show(),\n    onPointerUp: hide,\n    style: {\n      backgroundImage: value ? `url(${value})` : 'none'\n    }\n  }), shown && !!value && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hide,\n    style: {\n      cursor: 'pointer'\n    }\n  }), React.createElement(ImageLargePreview, {\n    ref: wrapperRef,\n    style: {\n      backgroundImage: `url(${value})`\n    }\n  })), React.createElement(DropZone, getRootProps({\n    isDragAccept\n  }), React.createElement(\"input\", getInputProps()), React.createElement(Instructions, null, isDragAccept ? 'drop image' : 'click or drop')), React.createElement(Remove, {\n    onClick: clear,\n    disabled: !value\n  })));\n}\n\nvar image = createInternalPlugin(_objectSpread2({\n  component: ImageComponent\n}, props$1));\nconst number = v8n().number();\n\nconst schema = (o, s) => v8n().array().length(2).every.number().test(o) && v8n().schema({\n  min: number,\n  max: number\n}).test(s);\n\nconst format = v => ({\n  min: v[0],\n  max: v[1]\n});\n\nconst sanitize = (value, {\n  bounds: [MIN, MAX]\n}, prevValue) => {\n  const _newValue = {\n    min: prevValue[0],\n    max: prevValue[1]\n  };\n\n  const {\n    min,\n    max\n  } = _objectSpread2(_objectSpread2({}, _newValue), value);\n\n  return [clamp(Number(min), MIN, Math.max(MIN, max)), clamp(Number(max), Math.min(MAX, min), MAX)];\n};\n\nconst normalize = ({\n  value,\n  min,\n  max\n}) => {\n  const boundsSettings = {\n    min,\n    max\n  };\n\n  const _settings = normalizeKeyedNumberSettings(format(value), {\n    min: boundsSettings,\n    max: boundsSettings\n  });\n\n  const bounds = [min, max];\n\n  const settings = _objectSpread2(_objectSpread2({}, _settings), {}, {\n    bounds\n  });\n\n  const _value = sanitize(format(value), settings, value);\n\n  return {\n    value: _value,\n    settings\n  };\n};\n\nvar props = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema,\n  format: format,\n  sanitize: sanitize,\n  normalize: normalize\n});\nconst _excluded$6 = [\"value\", \"bounds\", \"onDrag\"],\n      _excluded2$1 = [\"bounds\"];\nconst Container = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  gridTemplateColumns: 'auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)'\n});\n\nfunction IntervalSlider(_ref) {\n  let {\n    value,\n    bounds: [min, max],\n    onDrag\n  } = _ref,\n      settings = _objectWithoutProperties(_ref, _excluded$6);\n\n  const ref = useRef(null);\n  const minScrubberRef = useRef(null);\n  const maxScrubberRef = useRef(null);\n  const rangeWidth = useRef(0);\n  const scrubberWidth = useTh('sizes', 'scrubberWidth');\n  const bind = useDrag(({\n    event,\n    first,\n    xy: [x],\n    movement: [mx],\n    memo: _memo = {}\n  }) => {\n    if (first) {\n      const {\n        width,\n        left\n      } = ref.current.getBoundingClientRect();\n      rangeWidth.current = width - parseFloat(scrubberWidth);\n      const targetIsScrub = (event === null || event === void 0 ? void 0 : event.target) === minScrubberRef.current || (event === null || event === void 0 ? void 0 : event.target) === maxScrubberRef.current;\n      _memo.pos = invertedRange((x - left) / width, min, max);\n      const delta = Math.abs(_memo.pos - value.min) - Math.abs(_memo.pos - value.max);\n      _memo.key = delta < 0 || delta === 0 && _memo.pos <= value.min ? 'min' : 'max';\n      if (targetIsScrub) _memo.pos = value[_memo.key];\n    }\n\n    const newValue = _memo.pos + invertedRange(mx / rangeWidth.current, 0, max - min);\n    onDrag({\n      [_memo.key]: sanitizeStep(newValue, settings[_memo.key])\n    });\n    return _memo;\n  });\n  const minStyle = `calc(${range(value.min, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  const maxStyle = `calc(${1 - range(value.max, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  return React.createElement(RangeWrapper, _extends({\n    ref: ref\n  }, bind()), React.createElement(Range, null, React.createElement(Indicator, {\n    style: {\n      left: minStyle,\n      right: maxStyle\n    }\n  })), React.createElement(Scrubber, {\n    position: \"left\",\n    ref: minScrubberRef,\n    style: {\n      left: minStyle\n    }\n  }), React.createElement(Scrubber, {\n    position: \"right\",\n    ref: maxScrubberRef,\n    style: {\n      right: maxStyle\n    }\n  }));\n}\n\nfunction IntervalComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n\n  const _settings = _objectWithoutProperties(settings, _excluded2$1);\n\n  return React.createElement(React.Fragment, null, React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container, null, React.createElement(IntervalSlider, _extends({\n    value: displayValue\n  }, settings, {\n    onDrag: onUpdate\n  })), React.createElement(Vector, {\n    value: displayValue,\n    settings: _settings,\n    onUpdate: onUpdate,\n    innerLabelTrim: 0\n  }))));\n}\n\nvar interval = createInternalPlugin(_objectSpread2({\n  component: IntervalComponent\n}, props));\n\nconst createEventEmitter = () => {\n  const listenerMapping = new Map();\n  return {\n    on: (topic, listener) => {\n      let listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        listeners = new Set();\n        listenerMapping.set(topic, listeners);\n      }\n\n      listeners.add(listener);\n    },\n    off: (topic, listener) => {\n      const listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        return;\n      }\n\n      listeners.delete(listener);\n\n      if (listeners.size === 0) {\n        listenerMapping.delete(topic);\n      }\n    },\n    emit: (topic, ...args) => {\n      const listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        return;\n      }\n\n      for (const listener of listeners) {\n        listener(...args);\n      }\n    }\n  };\n};\n\nconst _excluded$5 = [\"type\", \"value\"],\n      _excluded2 = [\"onChange\", \"transient\", \"onEditStart\", \"onEditEnd\"];\n\nconst Store = function Store() {\n  const store = create(() => ({\n    data: {}\n  }));\n  const eventEmitter = createEventEmitter();\n  this.storeId = getUid();\n  this.useStore = store;\n  const folders = {};\n  const orderedPaths = new Set();\n\n  this.getVisiblePaths = () => {\n    const data = this.getData();\n    const paths = Object.keys(data);\n    const hiddenFolders = [];\n    Object.entries(folders).forEach(([path, settings]) => {\n      if (settings.render && paths.some(p => p.indexOf(path) === 0) && !settings.render(this.get)) hiddenFolders.push(path + '.');\n    });\n    const visiblePaths = [];\n    orderedPaths.forEach(path => {\n      if (path in data && data[path].__refCount > 0 && hiddenFolders.every(p => path.indexOf(p) === -1) && (!data[path].render || data[path].render(this.get))) visiblePaths.push(path);\n    });\n    return visiblePaths;\n  };\n\n  this.setOrderedPaths = newPaths => {\n    newPaths.forEach(p => orderedPaths.add(p));\n  };\n\n  this.orderPaths = paths => {\n    this.setOrderedPaths(paths);\n    return paths;\n  };\n\n  this.disposePaths = paths => {\n    store.setState(s => {\n      const data = s.data;\n      paths.forEach(path => {\n        if (path in data) {\n          const input = data[path];\n          input.__refCount--;\n\n          if (input.__refCount === 0 && input.type in SpecialInputs) {\n            delete data[path];\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.dispose = () => {\n    store.setState(() => {\n      return {\n        data: {}\n      };\n    });\n  };\n\n  this.getFolderSettings = path => {\n    return folders[path] || {};\n  };\n\n  this.getData = () => {\n    return store.getState().data;\n  };\n\n  this.addData = (newData, override) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(newData).forEach(([path, newInputData]) => {\n        let input = data[path];\n\n        if (!!input) {\n          const {\n            type,\n            value\n          } = newInputData,\n                rest = _objectWithoutProperties(newInputData, _excluded$5);\n\n          if (type !== input.type) {\n            warn(LevaErrors.INPUT_TYPE_OVERRIDE, type);\n          } else {\n            if (input.__refCount === 0 || override) {\n              Object.assign(input, rest);\n            }\n\n            input.__refCount++;\n          }\n        } else {\n          data[path] = _objectSpread2(_objectSpread2({}, newInputData), {}, {\n            __refCount: 1\n          });\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.setValueAtPath = (path, value, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      updateInput(data[path], value, path, this, fromPanel);\n      return {\n        data\n      };\n    });\n  };\n\n  this.setSettingsAtPath = (path, settings) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].settings = _objectSpread2(_objectSpread2({}, data[path].settings), settings);\n      return {\n        data\n      };\n    });\n  };\n\n  this.disableInputAtPath = (path, flag) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].disabled = flag;\n      return {\n        data\n      };\n    });\n  };\n\n  this.set = (values, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(values).forEach(([path, value]) => {\n        try {\n          updateInput(data[path], value, undefined, undefined, fromPanel);\n        } catch (_unused) {}\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.getInput = path => {\n    try {\n      return this.getData()[path];\n    } catch (e) {\n      warn(LevaErrors.PATH_DOESNT_EXIST, path);\n    }\n  };\n\n  this.get = path => {\n    var _this$getInput;\n\n    return (_this$getInput = this.getInput(path)) === null || _this$getInput === void 0 ? void 0 : _this$getInput.value;\n  };\n\n  this.emitOnEditStart = path => {\n    eventEmitter.emit(`onEditStart:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n\n  this.emitOnEditEnd = path => {\n    eventEmitter.emit(`onEditEnd:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n\n  this.subscribeToEditStart = (path, listener) => {\n    eventEmitter.on(`onEditStart:${path}`, listener);\n    return () => eventEmitter.off(path, listener);\n  };\n\n  this.subscribeToEditEnd = (path, listener) => {\n    eventEmitter.on(`onEditEnd:${path}`, listener);\n    return () => eventEmitter.off(path, listener);\n  };\n\n  const _getDataFromSchema = (schema, rootPath, mappedPaths) => {\n    const data = {};\n    Object.entries(schema).forEach(([key, rawInput]) => {\n      if (key === '') return warn(LevaErrors.EMPTY_KEY);\n      let newPath = join(rootPath, key);\n\n      if (rawInput.type === SpecialInputs.FOLDER) {\n        const newData = _getDataFromSchema(rawInput.schema, newPath, mappedPaths);\n\n        Object.assign(data, newData);\n        if (!(newPath in folders)) folders[newPath] = rawInput.settings;\n      } else if (key in mappedPaths) {\n        warn(LevaErrors.DUPLICATE_KEYS, key, newPath, mappedPaths[key].path);\n      } else {\n        const normalizedInput = normalizeInput(rawInput, key, newPath, data);\n\n        if (normalizedInput) {\n          const {\n            type,\n            options,\n            input\n          } = normalizedInput;\n\n          const {\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          } = options,\n                _options = _objectWithoutProperties(options, _excluded2);\n\n          data[newPath] = _objectSpread2(_objectSpread2(_objectSpread2({\n            type\n          }, _options), input), {}, {\n            fromPanel: true\n          });\n          mappedPaths[key] = {\n            path: newPath,\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          };\n        } else {\n          warn(LevaErrors.UNKNOWN_INPUT, newPath, rawInput);\n        }\n      }\n    });\n    return data;\n  };\n\n  this.getDataFromSchema = schema => {\n    const mappedPaths = {};\n\n    const data = _getDataFromSchema(schema, '', mappedPaths);\n\n    return [data, mappedPaths];\n  };\n};\n\nconst levaStore = new Store();\n\nfunction useCreateStore() {\n  return useMemo(() => new Store(), []);\n}\n\nif (process.env.NODE_ENV === 'development' && typeof window !== 'undefined') {\n  window.__STORE = levaStore;\n}\n\nconst defaultSettings$1 = {\n  collapsed: false\n};\n\nfunction folder(schema, settings) {\n  return {\n    type: SpecialInputs.FOLDER,\n    schema,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings$1), settings)\n  };\n}\n\nfunction button(onClick) {\n  return {\n    type: SpecialInputs.BUTTON,\n    onClick\n  };\n}\n\nfunction buttonGroup(opts) {\n  return {\n    type: SpecialInputs.BUTTON_GROUP,\n    opts\n  };\n}\n\nconst defaultSettings = {\n  graph: false,\n  interval: 100\n};\n\nfunction monitor(objectOrFn, settings) {\n  return {\n    type: SpecialInputs.MONITOR,\n    objectOrFn,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings), settings)\n  };\n}\n\nconst isInput = v => '__levaInput' in v;\n\nconst buildTree = (paths, filter) => {\n  const tree = {};\n\n  const _filter = filter ? filter.toLowerCase() : null;\n\n  paths.forEach(path => {\n    const [valueKey, folderPath] = getKeyPath(path);\n\n    if (!_filter || valueKey.toLowerCase().indexOf(_filter) > -1) {\n      merge(tree, folderPath, {\n        [valueKey]: {\n          __levaInput: true,\n          path\n        }\n      });\n    }\n  });\n  return tree;\n};\n\nfunction FolderTitle({\n  toggle,\n  toggled,\n  name\n}) {\n  return React.createElement(StyledTitle, {\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled\n  }), React.createElement(\"div\", null, name));\n}\n\nconst _excluded$4 = [\"type\", \"label\", \"path\", \"valueKey\", \"value\", \"settings\", \"setValue\", \"disabled\"];\n\nfunction ControlInput(_ref) {\n  let {\n    type,\n    label,\n    path,\n    valueKey,\n    value,\n    settings,\n    setValue,\n    disabled\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded$4);\n\n  const {\n    displayValue,\n    onChange,\n    onUpdate\n  } = useInputSetters({\n    type,\n    value,\n    settings,\n    setValue\n  });\n  const Input = Plugins[type].component;\n\n  if (!Input) {\n    warn(LevaErrors.NO_COMPONENT_FOR_TYPE, type, path);\n    return null;\n  }\n\n  return React.createElement(InputContext.Provider, {\n    value: _objectSpread2({\n      key: valueKey,\n      path,\n      id: '' + path,\n      label,\n      displayValue,\n      value,\n      onChange,\n      onUpdate,\n      settings,\n      setValue,\n      disabled\n    }, rest)\n  }, React.createElement(StyledInputWrapper, {\n    disabled: disabled\n  }, React.createElement(Input, null)));\n}\n\nconst StyledButton = styled('button', {\n  display: 'block',\n  $reset: '',\n  fontWeight: '$button',\n  color: '$highlight3',\n  height: '$rowHeight',\n  borderStyle: 'none',\n  borderRadius: '$sm',\n  backgroundColor: '$accent2',\n  cursor: 'pointer',\n  $hover: '$accent3',\n  $active: '$accent3 $accent1',\n  $focus: ''\n});\n\nfunction Button({\n  onClick,\n  label\n}) {\n  return React.createElement(Row, null, React.createElement(StyledButton, {\n    onClick: () => onClick()\n  }, label));\n}\n\nconst StyledButtonGroup = styled('div', {\n  $flex: '',\n  justifyContent: 'flex-end',\n  gap: '$colGap'\n});\nconst StyledButtonGroupButton = styled('button', {\n  $reset: '',\n  cursor: 'pointer',\n  borderRadius: '$xs',\n  '&:hover': {\n    backgroundColor: '$elevation3'\n  }\n});\n\nconst getOpts = ({\n  label: _label,\n  opts: _opts\n}) => {\n  let label = typeof _label === 'string' ? _label.trim() === '' ? null : _label : _label;\n  let opts = _opts;\n\n  if (typeof _opts.opts === 'object') {\n    if (opts.label !== undefined) {\n      label = _opts.label;\n    }\n\n    opts = _opts.opts;\n  }\n\n  return {\n    label,\n    opts: opts\n  };\n};\n\nfunction ButtonGroup(props) {\n  const {\n    label,\n    opts\n  } = getOpts(props);\n  return React.createElement(Row, {\n    input: !!label\n  }, label && React.createElement(Label, null, label), React.createElement(StyledButtonGroup, null, Object.entries(opts).map(([label, onClick]) => React.createElement(StyledButtonGroupButton, {\n    key: label,\n    onClick: () => onClick()\n  }, label))));\n}\n\nconst Canvas = styled('canvas', {\n  height: '$monitorHeight',\n  width: '100%',\n  display: 'block',\n  borderRadius: '$sm'\n});\nconst POINTS = 100;\n\nfunction push(arr, val) {\n  arr.push(val);\n  if (arr.length > POINTS) arr.shift();\n}\n\nconst MonitorCanvas = forwardRef(function ({\n  initialValue\n}, ref) {\n  const accentColor = useTh('colors', 'highlight3');\n  const backgroundColor = useTh('colors', 'elevation2');\n  const fillColor = useTh('colors', 'highlight1');\n  const [gradientTop, gradientBottom] = useMemo(() => {\n    return [colord(fillColor).alpha(0.4).toRgbString(), colord(fillColor).alpha(0.1).toRgbString()];\n  }, [fillColor]);\n  const points = useRef([initialValue]);\n  const min = useRef(initialValue);\n  const max = useRef(initialValue);\n  const raf = useRef();\n  const drawPlot = useCallback((_canvas, _ctx) => {\n    if (!_canvas) return;\n    const {\n      width,\n      height\n    } = _canvas;\n    const path = new Path2D();\n    const interval = width / POINTS;\n    const verticalPadding = height * 0.05;\n\n    for (let i = 0; i < points.current.length; i++) {\n      const p = range(points.current[i], min.current, max.current);\n      const x = interval * i;\n      const y = height - p * (height - verticalPadding * 2) - verticalPadding;\n      path.lineTo(x, y);\n    }\n\n    _ctx.clearRect(0, 0, width, height);\n\n    const gradientPath = new Path2D(path);\n    gradientPath.lineTo(interval * (points.current.length + 1), height);\n    gradientPath.lineTo(0, height);\n    gradientPath.lineTo(0, 0);\n\n    const gradient = _ctx.createLinearGradient(0, 0, 0, height);\n\n    gradient.addColorStop(0.0, gradientTop);\n    gradient.addColorStop(1.0, gradientBottom);\n    _ctx.fillStyle = gradient;\n\n    _ctx.fill(gradientPath);\n\n    _ctx.strokeStyle = backgroundColor;\n    _ctx.lineJoin = 'round';\n    _ctx.lineWidth = 14;\n\n    _ctx.stroke(path);\n\n    _ctx.strokeStyle = accentColor;\n    _ctx.lineWidth = 2;\n\n    _ctx.stroke(path);\n  }, [accentColor, backgroundColor, gradientTop, gradientBottom]);\n  const [canvas, ctx] = useCanvas2d(drawPlot);\n  useImperativeHandle(ref, () => ({\n    frame: val => {\n      if (min.current === undefined || val < min.current) min.current = val;\n      if (max.current === undefined || val > max.current) max.current = val;\n      push(points.current, val);\n      raf.current = requestAnimationFrame(() => drawPlot(canvas.current, ctx.current));\n    }\n  }), [canvas, ctx, drawPlot]);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  return React.createElement(Canvas, {\n    ref: canvas\n  });\n});\n\nconst parse = val => Number.isFinite(val) ? val.toPrecision(2) : val.toString();\n\nconst MonitorLog = forwardRef(function ({\n  initialValue\n}, ref) {\n  const [val, set] = useState(parse(initialValue));\n  useImperativeHandle(ref, () => ({\n    frame: v => set(parse(v))\n  }), []);\n  return React.createElement(\"div\", null, val);\n});\n\nfunction getValue(o) {\n  return typeof o === 'function' ? o() : o.current;\n}\n\nfunction Monitor({\n  label,\n  objectOrFn,\n  settings\n}) {\n  const ref = useRef();\n  const initialValue = useRef(getValue(objectOrFn));\n  useEffect(() => {\n    const timeout = window.setInterval(() => {\n      var _ref$current;\n\n      if (document.hidden) return;\n      (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.frame(getValue(objectOrFn));\n    }, settings.interval);\n    return () => window.clearInterval(timeout);\n  }, [objectOrFn, settings.interval]);\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, {\n    align: \"top\"\n  }, label), settings.graph ? React.createElement(MonitorCanvas, {\n    ref: ref,\n    initialValue: initialValue.current\n  }) : React.createElement(MonitorLog, {\n    ref: ref,\n    initialValue: initialValue.current\n  }));\n}\n\nconst _excluded$3 = [\"type\", \"label\", \"key\"];\nconst specialComponents = {\n  [SpecialInputs.BUTTON]: Button,\n  [SpecialInputs.BUTTON_GROUP]: ButtonGroup,\n  [SpecialInputs.MONITOR]: Monitor\n};\nconst Control = React.memo(({\n  path\n}) => {\n  const [input, {\n    set,\n    setSettings,\n    disable,\n    storeId,\n    emitOnEditStart,\n    emitOnEditEnd\n  }] = useInput(path);\n  if (!input) return null;\n\n  const {\n    type,\n    label,\n    key\n  } = input,\n        inputProps = _objectWithoutProperties(input, _excluded$3);\n\n  if (type in SpecialInputs) {\n    const SpecialInputForType = specialComponents[type];\n    return React.createElement(SpecialInputForType, _extends({\n      label: label,\n      path: path\n    }, inputProps));\n  }\n\n  if (!(type in Plugins)) {\n    log(LevaErrors.UNSUPPORTED_INPUT, type, path);\n    return null;\n  }\n\n  return React.createElement(ControlInput, _extends({\n    key: storeId + path,\n    type: type,\n    label: label,\n    storeId: storeId,\n    path: path,\n    valueKey: key,\n    setValue: set,\n    setSettings: setSettings,\n    disable: disable,\n    emitOnEditStart: emitOnEditStart,\n    emitOnEditEnd: emitOnEditEnd\n  }, inputProps));\n});\n\nconst Folder = ({\n  name,\n  path,\n  tree\n}) => {\n  const store = useStoreContext();\n  const newPath = join(path, name);\n  const {\n    collapsed,\n    color\n  } = store.getFolderSettings(newPath);\n  const [toggled, setToggle] = useState(!collapsed);\n  const folderRef = useRef(null);\n  const widgetColor = useTh('colors', 'folderWidgetColor');\n  const textColor = useTh('colors', 'folderTextColor');\n  useLayoutEffect(() => {\n    folderRef.current.style.setProperty('--leva-colors-folderWidgetColor', color || widgetColor);\n    folderRef.current.style.setProperty('--leva-colors-folderTextColor', color || textColor);\n  }, [color, widgetColor, textColor]);\n  return React.createElement(StyledFolder, {\n    ref: folderRef\n  }, React.createElement(FolderTitle, {\n    name: name,\n    toggled: toggled,\n    toggle: () => setToggle(t => !t)\n  }), React.createElement(TreeWrapper, {\n    parent: newPath,\n    tree: tree,\n    toggled: toggled\n  }));\n};\n\nconst TreeWrapper = React.memo(({\n  isRoot: _isRoot = false,\n  fill: _fill = false,\n  flat: _flat = false,\n  parent,\n  tree,\n  toggled\n}) => {\n  const {\n    wrapperRef,\n    contentRef\n  } = useToggle(toggled);\n  return React.createElement(StyledWrapper, {\n    ref: wrapperRef,\n    isRoot: _isRoot,\n    fill: _fill,\n    flat: _flat\n  }, React.createElement(StyledContent, {\n    ref: contentRef,\n    isRoot: _isRoot,\n    toggled: toggled\n  }, Object.entries(tree).map(([key, value]) => isInput(value) ? React.createElement(Control, {\n    key: value.path,\n    valueKey: value.valueKey,\n    path: value.path\n  }) : React.createElement(Folder, {\n    key: key,\n    name: key,\n    path: parent,\n    tree: value\n  }))));\n});\nconst StyledRoot = styled('div', {\n  position: 'relative',\n  fontFamily: '$mono',\n  fontSize: '$root',\n  color: '$rootText',\n  backgroundColor: '$elevation1',\n  variants: {\n    fill: {\n      false: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        zIndex: 1000,\n        width: '$rootWidth'\n      },\n      true: {\n        position: 'relative',\n        width: '100%'\n      }\n    },\n    flat: {\n      false: {\n        borderRadius: '$lg',\n        boxShadow: '$level1'\n      }\n    },\n    oneLineLabels: {\n      true: {\n        [`${StyledInputRow}`]: {\n          gridTemplateColumns: 'auto',\n          gridAutoColumns: 'minmax(max-content, 1fr)',\n          gridAutoRows: 'minmax($sizes$rowHeight), auto)',\n          rowGap: 0,\n          columnGap: 0,\n          marginTop: '$rowGap'\n        }\n      }\n    },\n    hideTitleBar: {\n      true: {\n        $$titleBarHeight: '0px'\n      },\n      false: {\n        $$titleBarHeight: '$sizes$titleBarHeight'\n      }\n    }\n  },\n  '&,*,*:after,*:before': {\n    boxSizing: 'border-box'\n  },\n  '*::selection': {\n    backgroundColor: '$accent2'\n  }\n});\nconst iconWidth = 40;\nconst Icon = styled('i', {\n  $flexCenter: '',\n  width: iconWidth,\n  userSelect: 'none',\n  cursor: 'pointer',\n  '> svg': {\n    fill: '$highlight1',\n    transition: 'transform 350ms ease, fill 250ms ease'\n  },\n  '&:hover > svg': {\n    fill: '$highlight3'\n  },\n  variants: {\n    active: {\n      true: {\n        '> svg': {\n          fill: '$highlight2'\n        }\n      }\n    }\n  }\n});\nconst StyledTitleWithFilter = styled('div', {\n  display: 'flex',\n  alignItems: 'stretch',\n  justifyContent: 'space-between',\n  height: '$titleBarHeight',\n  variants: {\n    mode: {\n      drag: {\n        cursor: 'grab'\n      }\n    }\n  }\n});\nconst FilterWrapper = styled('div', {\n  $flex: '',\n  position: 'relative',\n  width: '100%',\n  overflow: 'hidden',\n  transition: 'height 250ms ease',\n  color: '$highlight3',\n  paddingLeft: '$md',\n  [`> ${Icon}`]: {\n    height: 30\n  },\n  variants: {\n    toggled: {\n      true: {\n        height: 30\n      },\n      false: {\n        height: 0\n      }\n    }\n  }\n});\nconst StyledFilterInput = styled('input', {\n  $reset: '',\n  flex: 1,\n  position: 'relative',\n  height: 30,\n  width: '100%',\n  backgroundColor: 'transparent',\n  fontSize: '10px',\n  borderRadius: '$root',\n  '&:focus': {},\n  '&::placeholder': {\n    color: '$highlight2'\n  }\n});\nconst TitleContainer = styled('div', {\n  $flexCenter: '',\n  flex: 1,\n  '> svg': {\n    fill: '$highlight1'\n  },\n  color: '$highlight1',\n  variants: {\n    drag: {\n      true: {\n        $draggable: '',\n        '> svg': {\n          transition: 'fill 250ms ease'\n        },\n        '&:hover': {\n          color: '$highlight3'\n        },\n        '&:hover > svg': {\n          fill: '$highlight3'\n        }\n      }\n    },\n    filterEnabled: {\n      false: {\n        paddingRight: iconWidth\n      }\n    }\n  }\n});\nconst FilterInput = React.forwardRef(({\n  setFilter,\n  toggle\n}, ref) => {\n  const [value, set] = useState('');\n  const debouncedOnChange = useMemo(() => debounce(setFilter, 250), [setFilter]);\n\n  const clear = () => {\n    setFilter('');\n    set('');\n  };\n\n  const _onChange = e => {\n    const v = e.currentTarget.value;\n    toggle(true);\n    set(v);\n  };\n\n  useEffect(() => {\n    debouncedOnChange(value);\n  }, [value, debouncedOnChange]);\n  return React.createElement(React.Fragment, null, React.createElement(StyledFilterInput, {\n    ref: ref,\n    value: value,\n    placeholder: \"[Open filter with CMD+SHIFT+L]\",\n    onPointerDown: e => e.stopPropagation(),\n    onChange: _onChange\n  }), React.createElement(Icon, {\n    onClick: () => clear(),\n    style: {\n      visibility: value ? 'visible' : 'hidden'\n    }\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"14\",\n    width: \"14\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n    clipRule: \"evenodd\"\n  }))));\n});\n\nfunction TitleWithFilter({\n  setFilter,\n  onDrag,\n  toggle,\n  toggled,\n  title,\n  drag,\n  filterEnabled\n}) {\n  const [filterShown, setShowFilter] = useState(false);\n  const inputRef = useRef(null);\n  useEffect(() => {\n    var _inputRef$current, _inputRef$current2;\n\n    if (filterShown) (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();else (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.blur();\n  }, [filterShown]);\n  const bind = useDrag$1(({\n    offset: [x, y]\n  }) => onDrag({\n    x,\n    y\n  }), {\n    filterTaps: true\n  });\n  useEffect(() => {\n    const handleShortcut = event => {\n      if (event.key === 'L' && event.shiftKey && event.metaKey) {\n        setShowFilter(f => !f);\n      }\n    };\n\n    window.addEventListener('keydown', handleShortcut);\n    return () => window.removeEventListener('keydown', handleShortcut);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(StyledTitleWithFilter, {\n    mode: drag ? 'drag' : undefined\n  }, React.createElement(Icon, {\n    active: !toggled,\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled,\n    width: 12,\n    height: 8\n  })), React.createElement(TitleContainer, _extends({}, drag ? bind() : {}, {\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), title === undefined && drag ? React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"10\",\n    viewBox: \"0 0 28 14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"12\",\n    r: \"2\"\n  })) : title), filterEnabled && React.createElement(Icon, {\n    active: filterShown,\n    onClick: () => setShowFilter(f => !f)\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"20\",\n    viewBox: \"0 0 20 20\"\n  }, React.createElement(\"path\", {\n    d: \"M9 9a2 2 0 114 0 2 2 0 01-4 0z\"\n  }), React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z\",\n    clipRule: \"evenodd\"\n  })))), React.createElement(FilterWrapper, {\n    toggled: filterShown\n  }, React.createElement(FilterInput, {\n    ref: inputRef,\n    setFilter: setFilter,\n    toggle: toggle\n  })));\n}\n\nconst _excluded$2 = [\"store\", \"hidden\", \"theme\", \"collapsed\"];\n\nfunction LevaRoot(_ref) {\n  let {\n    store,\n    hidden = false,\n    theme,\n    collapsed = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$2);\n\n  const themeContext = useDeepMemo(() => mergeTheme(theme), [theme]);\n  const [toggled, setToggle] = useState(!collapsed);\n  const computedToggled = typeof collapsed === 'object' ? !collapsed.collapsed : toggled;\n  const computedSetToggle = useMemo(() => {\n    if (typeof collapsed === 'object') {\n      return value => {\n        if (typeof value === 'function') {\n          collapsed.onChange(!value(!collapsed.collapsed));\n        } else {\n          collapsed.onChange(!value);\n        }\n      };\n    }\n\n    return setToggle;\n  }, [collapsed]);\n  if (!store || hidden) return null;\n  return React.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React.createElement(LevaCore, _extends({\n    store: store\n  }, props, {\n    toggled: computedToggled,\n    setToggle: computedSetToggle,\n    rootClass: themeContext.className\n  })));\n}\n\nconst LevaCore = React.memo(({\n  store,\n  rootClass,\n  fill: _fill = false,\n  flat: _flat = false,\n  oneLineLabels: _oneLineLabels = false,\n  titleBar: _titleBar = {\n    title: undefined,\n    drag: true,\n    filter: true\n  },\n  hideCopyButton: _hideCopyButton = false,\n  toggled,\n  setToggle\n}) => {\n  var _titleBar$drag, _titleBar$filter;\n\n  const paths = useVisiblePaths(store);\n  const [filter, setFilter] = useState('');\n  const tree = useMemo(() => buildTree(paths, filter), [paths, filter]);\n  const [rootRef, set] = useTransform();\n  const shouldShow = paths.length > 0;\n  const title = typeof _titleBar === 'object' ? _titleBar.title || undefined : undefined;\n  const drag = typeof _titleBar === 'object' ? (_titleBar$drag = _titleBar.drag) !== null && _titleBar$drag !== void 0 ? _titleBar$drag : true : true;\n  const filterEnabled = typeof _titleBar === 'object' ? (_titleBar$filter = _titleBar.filter) !== null && _titleBar$filter !== void 0 ? _titleBar$filter : true : true;\n  return React.createElement(PanelSettingsContext.Provider, {\n    value: {\n      hideCopyButton: _hideCopyButton\n    }\n  }, React.createElement(StyledRoot, {\n    ref: rootRef,\n    className: rootClass,\n    fill: _fill,\n    flat: _flat,\n    oneLineLabels: _oneLineLabels,\n    hideTitleBar: !_titleBar,\n    style: {\n      display: shouldShow ? 'block' : 'none'\n    }\n  }, _titleBar && React.createElement(TitleWithFilter, {\n    onDrag: set,\n    setFilter: setFilter,\n    toggle: flag => setToggle(t => flag !== null && flag !== void 0 ? flag : !t),\n    toggled: toggled,\n    title: title,\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), shouldShow && React.createElement(StoreContext.Provider, {\n    value: store\n  }, React.createElement(TreeWrapper, {\n    isRoot: true,\n    fill: _fill,\n    flat: _flat,\n    tree: tree,\n    toggled: toggled\n  }))));\n});\nconst _excluded$1 = [\"isRoot\"];\nlet rootInitialized = false;\nlet rootEl = null;\n\nfunction Leva(_ref) {\n  let {\n    isRoot = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$1);\n\n  useEffect(() => {\n    rootInitialized = true;\n\n    if (!isRoot && rootEl) {\n      rootEl.remove();\n      rootEl = null;\n    }\n\n    return () => {\n      if (!isRoot) rootInitialized = false;\n    };\n  }, [isRoot]);\n  return React.createElement(LevaRoot, _extends({\n    store: levaStore\n  }, props));\n}\n\nfunction useRenderRoot(isGlobalPanel) {\n  useEffect(() => {\n    if (isGlobalPanel && !rootInitialized) {\n      if (!rootEl) {\n        rootEl = document.getElementById('leva__root') || Object.assign(document.createElement('div'), {\n          id: 'leva__root'\n        });\n\n        if (document.body) {\n          document.body.appendChild(rootEl);\n          ReactDOM.render(React.createElement(Leva, {\n            isRoot: true\n          }), rootEl);\n        }\n      }\n\n      rootInitialized = true;\n    }\n  }, [isGlobalPanel]);\n}\n\nconst _excluded = [\"store\"];\n\nfunction LevaPanel(_ref) {\n  let {\n    store\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const parentStore = useStoreContext();\n\n  const _store = store === undefined ? parentStore : store;\n\n  return React.createElement(LevaRoot, _extends({\n    store: _store\n  }, props));\n}\n\nfunction parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  let schema;\n  let folderName = undefined;\n  let folderSettings;\n  let hookSettings;\n  let deps;\n\n  if (typeof schemaOrFolderName === 'string') {\n    folderName = schemaOrFolderName;\n    schema = settingsOrDepsOrSchema;\n\n    if (Array.isArray(depsOrSettingsOrFolderSettings)) {\n      deps = depsOrSettingsOrFolderSettings;\n    } else {\n      if (depsOrSettingsOrFolderSettings) {\n        if ('store' in depsOrSettingsOrFolderSettings) {\n          hookSettings = depsOrSettingsOrFolderSettings;\n          deps = depsOrSettings;\n        } else {\n          folderSettings = depsOrSettingsOrFolderSettings;\n\n          if (Array.isArray(depsOrSettings)) {\n            deps = depsOrSettings;\n          } else {\n            hookSettings = depsOrSettings;\n            deps = depsOrUndefined;\n          }\n        }\n      }\n    }\n  } else {\n    schema = schemaOrFolderName;\n\n    if (Array.isArray(settingsOrDepsOrSchema)) {\n      deps = settingsOrDepsOrSchema;\n    } else {\n      hookSettings = settingsOrDepsOrSchema;\n      deps = depsOrSettingsOrFolderSettings;\n    }\n  }\n\n  return {\n    schema,\n    folderName,\n    folderSettings,\n    hookSettings,\n    deps: deps || []\n  };\n}\n\nfunction useControls(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  const {\n    folderName,\n    schema,\n    folderSettings,\n    hookSettings,\n    deps\n  } = parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined);\n  const schemaIsFunction = typeof schema === 'function';\n  const depsChanged = useRef(false);\n  const firstRender = useRef(true);\n\n  const _schema = useDeepMemo(() => {\n    depsChanged.current = true;\n    const s = typeof schema === 'function' ? schema() : schema;\n    return folderName ? {\n      [folderName]: folder(s, folderSettings)\n    } : s;\n  }, deps);\n\n  const isGlobalPanel = !(hookSettings !== null && hookSettings !== void 0 && hookSettings.store);\n  useRenderRoot(isGlobalPanel);\n  const [store] = useState(() => (hookSettings === null || hookSettings === void 0 ? void 0 : hookSettings.store) || levaStore);\n  const [initialData, mappedPaths] = useMemo(() => store.getDataFromSchema(_schema), [store, _schema]);\n  const [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths] = useMemo(() => {\n    const allPaths = [];\n    const renderPaths = [];\n    const onChangePaths = {};\n    const onEditStartPaths = {};\n    const onEditEndPaths = {};\n    Object.values(mappedPaths).forEach(({\n      path,\n      onChange,\n      onEditStart,\n      onEditEnd,\n      transient\n    }) => {\n      allPaths.push(path);\n\n      if (!!onChange) {\n        onChangePaths[path] = onChange;\n\n        if (!transient) {\n          renderPaths.push(path);\n        }\n      } else {\n        renderPaths.push(path);\n      }\n\n      if (onEditStart) {\n        onEditStartPaths[path] = onEditStart;\n      }\n\n      if (onEditEnd) {\n        onEditEndPaths[path] = onEditEnd;\n      }\n    });\n    return [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths];\n  }, [mappedPaths]);\n  const paths = useMemo(() => store.orderPaths(allPaths), [allPaths, store]);\n  const values = useValuesForPath(store, renderPaths, initialData);\n  const set = useCallback(values => {\n    const _values = Object.entries(values).reduce((acc, [p, v]) => Object.assign(acc, {\n      [mappedPaths[p].path]: v\n    }), {});\n\n    store.set(_values, false);\n  }, [store, mappedPaths]);\n  useEffect(() => {\n    const shouldOverrideSettings = !firstRender.current && depsChanged.current;\n    store.addData(initialData, shouldOverrideSettings);\n    firstRender.current = false;\n    depsChanged.current = false;\n    return () => store.disposePaths(paths);\n  }, [store, paths, initialData]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onChangePaths).forEach(([path, onChange]) => {\n      onChange(store.get(path), path, _objectSpread2({\n        initial: true,\n        get: store.get\n      }, store.getInput(path)));\n      const unsub = store.useStore.subscribe(([value, input]) => onChange(value, path, _objectSpread2({\n        initial: false,\n        get: store.get\n      }, input)), s => {\n        const input = s.data[path];\n        const value = input.disabled ? undefined : input.value;\n        return [value, input];\n      }, shallow);\n      unsubscriptions.push(unsub);\n    });\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [store, onChangePaths]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onEditStartPaths).forEach(([path, onEditStart]) => unsubscriptions.push(store.subscribeToEditStart(path, onEditStart)));\n    Object.entries(onEditEndPaths).forEach(([path, onEditEnd]) => unsubscriptions.push(store.subscribeToEditEnd(path, onEditEnd)));\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [onEditStartPaths, onEditEndPaths, store]);\n  if (schemaIsFunction) return [values, set];\n  return values;\n}\n\nregister(LevaInputs.SELECT, select);\nregister(LevaInputs.IMAGE, image);\nregister(LevaInputs.NUMBER, number$1);\nregister(LevaInputs.COLOR, color);\nregister(LevaInputs.STRING, string);\nregister(LevaInputs.BOOLEAN, boolean);\nregister(LevaInputs.INTERVAL, interval);\nregister(LevaInputs.VECTOR3D, vector3d);\nregister(LevaInputs.VECTOR2D, vector2d);\nexport { Leva, LevaPanel, button, buttonGroup, folder, levaStore, monitor, useControls, useCreateStore };","map":{"version":3,"sources":["/Users/icoco/Workspace/2022/prj/webgl/r3f-app/node_modules/leva/dist/leva.esm.js"],"names":["p","pick","_","_objectSpread2","o","omit","s","styled","u","useInputContext","R","Row","L","Label","V","ValueInput","P","Portal","O","Overlay","c","createInternalPlugin","a","Vector","g","getVectorPlugin","b","useTransform","d","useTh","e","useDrag","f","_extends","m","multiplyStep","h","clamp","i","_objectWithoutProperties","n","normalizeKeyedNumberSettings","j","invertedRange","k","sanitizeStep","r","range","l","RangeWrapper","q","Range","I","Indicator","S","Scrubber","t","getUid","v","SpecialInputs","w","warn","x","LevaErrors","y","updateInput","z","normalizeInput","A","StyledTitle","C","Chevron","B","useInputSetters","D","Plugins","E","InputContext","F","StyledInputWrapper","G","useCanvas2d","H","useInput","J","log","K","StyledWrapper","M","StyledContent","N","useStoreContext","Q","StyledFolder","T","StyledInputRow","U","debounce","W","PanelSettingsContext","X","StoreContext","Y","mergeTheme","Z","ThemeContext","$","register","a0","LevaInputs","a1","select","a2","number$1","a3","string","a4","boolean","a5","LevaStoreProvider","v8n","extend","colord","getFormat","namesPlugin","dequal","React","useRef","useMemo","useLayoutEffect","useEffect","useState","useCallback","forwardRef","useImperativeHandle","RgbaColorPicker","RgbColorPicker","shallow","useDrag$1","useDropzone","create","ReactDOM","merge","join","args","filter","Boolean","getKeyPath","path","dir","split","pop","undefined","getValuesForPaths","data","paths","Object","entries","reduce","acc","value","disabled","key","useCompareMemoize","deep","ref","compare","current","useDeepMemo","fn","deps","useToggle","toggled","wrapperRef","contentRef","firstRender","style","height","overflow","timeout","fixHeight","removeProperty","scrollIntoView","behavior","block","addEventListener","once","getBoundingClientRect","window","setTimeout","removeEventListener","clearTimeout","useVisiblePaths","store","setPaths","getVisiblePaths","unsub","useStore","subscribe","useValuesForPath","initialData","valuesForPath","usePopin","margin","popinRef","shown","setShow","show","hide","bottom","top","left","direction","innerHeight","position","zIndex","convertMap","rgb","hsl","hsv","hex","color","isValid","schema$2","test","convert","format","hasAlpha","isString","convertFn","result","sanitize$2","settings","Error","format$1","normalize$3","_f","length","props$2","freeze","__proto__","schema","sanitize","normalize","ColorPreview","boxSizing","borderRadius","cursor","width","backgroundColor","backgroundImage","$inputStyle","$hover","variants","active","true","content","right","PickerContainer","display","gridTemplateColumns","columnGap","alignItems","PickerWrapper","boxShadow","convertToRgb","toRgb","Color","displayValue","onUpdate","emitOnEditStart","emitOnEditEnd","timer","initialRgb","setInitialRgb","ColorPicker","showPicker","hidePicker","hideAfterDelay","createElement","Fragment","onClick","onPointerUp","onMouseEnter","onMouseLeave","buttons","onChange","ColorComponent","label","input","component","Vector3dComponent","vector3d","JoystickTrigger","$flexCenter","$draggable","JoystickPlayground","transform","isOutOfBounds","false","borderStyle","borderWidth","borderColor","zindex","Joystick","outOfBoundsX","outOfBoundsY","stepMultiplier","joystickShown","setShowJoystick","setIsOutOfBounds","spanRef","set","joystickeRef","playgroundRef","keys","v1","v2","joystick","yFactor","step","stepV1","stepV2","wpx","hpx","parseFloat","startOutOfBounds","setInterval","incX","incY","Array","isArray","endOutOfBounds","setStepMultiplier","event","bind","first","delta","dx","dy","movement","mx","my","_x","_y","Math","abs","sign","newX","newY","Container$1","withJoystick","Vector2dComponent","_excluded$7","plugin","normalize$2","_ref","vector2d","sanitize$1","File","URL","createObjectURL","indexOf","schema$1","_o","normalize$1","image","props$1","ImageContainer","DropZone","background","textAlign","outline","userSelect","$focusWithin","$active","isDragAccept","ImagePreview","backgroundSize","backgroundPosition","hasImage","ImageLargePreview","pointerEvents","Instructions","fontSize","padding","Remove","marginRight","ImageComponent","onDrop","acceptedFiles","clear","stopPropagation","getRootProps","getInputProps","maxFiles","accept","onPointerDown","number","array","every","min","max","bounds","MIN","MAX","prevValue","_newValue","Number","boundsSettings","_settings","_value","props","_excluded$6","_excluded2$1","Container","IntervalSlider","onDrag","minScrubberRef","maxScrubberRef","rangeWidth","scrubberWidth","xy","memo","_memo","targetIsScrub","target","pos","newValue","minStyle","maxStyle","IntervalComponent","innerLabelTrim","interval","createEventEmitter","listenerMapping","Map","on","topic","listener","listeners","get","Set","add","off","delete","size","emit","_excluded$5","_excluded2","Store","eventEmitter","storeId","folders","orderedPaths","getData","hiddenFolders","forEach","render","some","push","visiblePaths","__refCount","setOrderedPaths","newPaths","orderPaths","disposePaths","setState","type","dispose","getFolderSettings","getState","addData","newData","override","newInputData","rest","INPUT_TYPE_OVERRIDE","assign","setValueAtPath","fromPanel","setSettingsAtPath","disableInputAtPath","flag","values","_unused","getInput","PATH_DOESNT_EXIST","_this$getInput","subscribeToEditStart","subscribeToEditEnd","_getDataFromSchema","rootPath","mappedPaths","rawInput","EMPTY_KEY","newPath","FOLDER","DUPLICATE_KEYS","normalizedInput","options","transient","onEditStart","onEditEnd","_options","UNKNOWN_INPUT","getDataFromSchema","levaStore","useCreateStore","process","env","NODE_ENV","__STORE","defaultSettings$1","collapsed","folder","button","BUTTON","buttonGroup","opts","BUTTON_GROUP","defaultSettings","graph","monitor","objectOrFn","MONITOR","isInput","buildTree","tree","_filter","toLowerCase","valueKey","folderPath","__levaInput","FolderTitle","toggle","name","_excluded$4","ControlInput","setValue","Input","NO_COMPONENT_FOR_TYPE","Provider","id","StyledButton","$reset","fontWeight","$focus","Button","StyledButtonGroup","$flex","justifyContent","gap","StyledButtonGroupButton","getOpts","_label","_opts","trim","ButtonGroup","map","Canvas","POINTS","arr","val","shift","MonitorCanvas","initialValue","accentColor","fillColor","gradientTop","gradientBottom","alpha","toRgbString","points","raf","drawPlot","_canvas","_ctx","Path2D","verticalPadding","lineTo","clearRect","gradientPath","gradient","createLinearGradient","addColorStop","fillStyle","fill","strokeStyle","lineJoin","lineWidth","stroke","canvas","ctx","frame","requestAnimationFrame","cancelAnimationFrame","parse","isFinite","toPrecision","toString","MonitorLog","getValue","Monitor","_ref$current","document","hidden","clearInterval","align","_excluded$3","specialComponents","Control","setSettings","disable","inputProps","SpecialInputForType","UNSUPPORTED_INPUT","Folder","setToggle","folderRef","widgetColor","textColor","setProperty","TreeWrapper","parent","isRoot","_isRoot","_fill","flat","_flat","StyledRoot","fontFamily","oneLineLabels","gridAutoColumns","gridAutoRows","rowGap","marginTop","hideTitleBar","$$titleBarHeight","iconWidth","Icon","transition","StyledTitleWithFilter","mode","drag","FilterWrapper","paddingLeft","StyledFilterInput","flex","TitleContainer","filterEnabled","paddingRight","FilterInput","setFilter","debouncedOnChange","_onChange","currentTarget","placeholder","visibility","xmlns","viewBox","fillRule","clipRule","TitleWithFilter","title","filterShown","setShowFilter","inputRef","_inputRef$current","_inputRef$current2","focus","blur","offset","filterTaps","handleShortcut","shiftKey","metaKey","cx","cy","_excluded$2","LevaRoot","theme","themeContext","computedToggled","computedSetToggle","LevaCore","rootClass","className","_oneLineLabels","titleBar","_titleBar","hideCopyButton","_hideCopyButton","_titleBar$drag","_titleBar$filter","rootRef","shouldShow","_excluded$1","rootInitialized","rootEl","Leva","remove","useRenderRoot","isGlobalPanel","getElementById","body","appendChild","_excluded","LevaPanel","parentStore","_store","parseArgs","schemaOrFolderName","settingsOrDepsOrSchema","depsOrSettingsOrFolderSettings","depsOrSettings","depsOrUndefined","folderName","folderSettings","hookSettings","useControls","schemaIsFunction","depsChanged","_schema","allPaths","renderPaths","onChangePaths","onEditStartPaths","onEditEndPaths","_values","shouldOverrideSettings","unsubscriptions","initial","SELECT","IMAGE","NUMBER","COLOR","STRING","BOOLEAN","INTERVAL","VECTOR3D","VECTOR2D"],"mappings":"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","sourcesContent":["import { p as pick, _ as _objectSpread2, o as omit, s as styled, u as useInputContext, R as Row, L as Label, V as ValueInput, P as Portal, O as Overlay, c as createInternalPlugin, a as Vector, g as getVectorPlugin, b as useTransform, d as useTh, e as useDrag, f as _extends, m as multiplyStep, h as clamp, i as _objectWithoutProperties, n as normalizeKeyedNumberSettings, j as invertedRange, k as sanitizeStep, r as range, l as RangeWrapper, q as Range, I as Indicator, S as Scrubber, t as getUid, v as SpecialInputs, w as warn, x as LevaErrors, y as updateInput, z as normalizeInput, A as StyledTitle, C as Chevron, B as useInputSetters, D as Plugins, E as InputContext, F as StyledInputWrapper, G as useCanvas2d, H as useInput, J as log, K as StyledWrapper, M as StyledContent, N as useStoreContext, Q as StyledFolder, T as StyledInputRow, U as debounce, W as PanelSettingsContext, X as StoreContext, Y as mergeTheme, Z as ThemeContext, $ as register, a0 as LevaInputs, a1 as select, a2 as number$1, a3 as string, a4 as boolean } from './vector-plugin-ffba4822.esm.js';\nexport { a0 as LevaInputs, a5 as LevaStoreProvider, N as useStoreContext } from './vector-plugin-ffba4822.esm.js';\nimport v8n from 'v8n';\nimport { extend, colord, getFormat } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport { dequal } from 'dequal/lite';\nimport React, { useRef, useMemo, useLayoutEffect, useEffect, useState, useCallback, forwardRef, useImperativeHandle } from 'react';\nimport { RgbaColorPicker, RgbColorPicker } from 'react-colorful';\nimport shallow from 'zustand/shallow';\nimport { useDrag as useDrag$1 } from 'react-use-gesture';\nimport '@radix-ui/react-portal';\nimport '@radix-ui/react-tooltip';\nimport { useDropzone } from 'react-dropzone';\nimport create from 'zustand';\nimport ReactDOM from 'react-dom';\nimport merge from 'merge-value';\nimport '@stitches/react';\n\nconst join = (...args) => args.filter(Boolean).join('.');\nfunction getKeyPath(path) {\n  const dir = path.split('.');\n  return [dir.pop(), dir.join('.') || undefined];\n}\n\nfunction getValuesForPaths(data, paths) {\n  return Object.entries(pick(data, paths)).reduce((acc, [, {\n    value,\n    disabled,\n    key\n  }]) => {\n    acc[key] = disabled ? undefined : value;\n    return acc;\n  }, {});\n}\n\nfunction useCompareMemoize(value, deep) {\n  const ref = useRef();\n  const compare = deep ? dequal : shallow;\n\n  if (!compare(value, ref.current)) {\n    ref.current = value;\n  }\n\n  return ref.current;\n}\n\nfunction useDeepMemo(fn, deps) {\n  return useMemo(fn, useCompareMemoize(deps, true));\n}\n\nfunction useToggle(toggled) {\n  const wrapperRef = useRef(null);\n  const contentRef = useRef(null);\n  const firstRender = useRef(true);\n  useLayoutEffect(() => {\n    if (!toggled) {\n      wrapperRef.current.style.height = '0px';\n      wrapperRef.current.style.overflow = 'hidden';\n    }\n  }, []);\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      return;\n    }\n\n    let timeout;\n    const ref = wrapperRef.current;\n\n    const fixHeight = () => {\n      if (toggled) {\n        ref.style.removeProperty('height');\n        ref.style.removeProperty('overflow');\n        contentRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    };\n\n    ref.addEventListener('transitionend', fixHeight, {\n      once: true\n    });\n    const {\n      height\n    } = contentRef.current.getBoundingClientRect();\n    ref.style.height = height + 'px';\n\n    if (!toggled) {\n      ref.style.overflow = 'hidden';\n      timeout = window.setTimeout(() => ref.style.height = '0px', 50);\n    }\n\n    return () => {\n      ref.removeEventListener('transitionend', fixHeight);\n      clearTimeout(timeout);\n    };\n  }, [toggled]);\n  return {\n    wrapperRef,\n    contentRef\n  };\n}\n\nconst useVisiblePaths = store => {\n  const [paths, setPaths] = useState(store.getVisiblePaths());\n  useEffect(() => {\n    setPaths(store.getVisiblePaths());\n    const unsub = store.useStore.subscribe(setPaths, store.getVisiblePaths, shallow);\n    return () => unsub();\n  }, [store]);\n  return paths;\n};\n\nfunction useValuesForPath(store, paths, initialData) {\n  const valuesForPath = store.useStore(s => {\n    const data = _objectSpread2(_objectSpread2({}, initialData), s.data);\n\n    return getValuesForPaths(data, paths);\n  }, shallow);\n  return valuesForPath;\n}\n\nfunction usePopin(margin = 3) {\n  const popinRef = useRef(null);\n  const wrapperRef = useRef(null);\n  const [shown, setShow] = useState(false);\n  const show = useCallback(() => setShow(true), []);\n  const hide = useCallback(() => setShow(false), []);\n  useLayoutEffect(() => {\n    if (shown) {\n      const {\n        bottom,\n        top,\n        left\n      } = popinRef.current.getBoundingClientRect();\n      const {\n        height\n      } = wrapperRef.current.getBoundingClientRect();\n      const direction = bottom + height > window.innerHeight - 40 ? 'up' : 'down';\n      wrapperRef.current.style.position = 'fixed';\n      wrapperRef.current.style.zIndex = '10000';\n      wrapperRef.current.style.left = left + 'px';\n      if (direction === 'down') wrapperRef.current.style.top = bottom + margin + 'px';else wrapperRef.current.style.bottom = window.innerHeight - top + margin + 'px';\n    }\n  }, [margin, shown]);\n  return {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  };\n}\n\nextend([namesPlugin]);\nconst convertMap = {\n  rgb: 'toRgb',\n  hsl: 'toHsl',\n  hsv: 'toHsv',\n  hex: 'toHex'\n};\nv8n.extend({\n  color: () => value => colord(value).isValid()\n});\nconst schema$2 = o => v8n().color().test(o);\n\nfunction convert(color, {\n  format,\n  hasAlpha,\n  isString\n}) {\n  const convertFn = convertMap[format] + (isString && format !== 'hex' ? 'String' : '');\n  const result = color[convertFn]();\n  return typeof result === 'object' && !hasAlpha ? omit(result, ['a']) : result;\n}\n\nconst sanitize$2 = (v, settings) => {\n  const color = colord(v);\n  if (!color.isValid()) throw Error('Invalid color');\n  return convert(color, settings);\n};\nconst format$1 = (v, settings) => {\n  return convert(colord(v), _objectSpread2(_objectSpread2({}, settings), {}, {\n    isString: true,\n    format: 'hex'\n  }));\n};\nconst normalize$3 = ({\n  value\n}) => {\n  const _f = getFormat(value);\n\n  const format = _f === 'name' ? 'hex' : _f;\n  const hasAlpha = typeof value === 'object' ? 'a' in value : _f === 'hex' && value.length === 8 || /^(rgba)|(hsla)|(hsva)/.test(value);\n  const settings = {\n    format,\n    hasAlpha,\n    isString: typeof value === 'string'\n  };\n  return {\n    value: sanitize$2(value, settings),\n    settings\n  };\n};\n\nvar props$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$2,\n  sanitize: sanitize$2,\n  format: format$1,\n  normalize: normalize$3\n});\n\nconst ColorPreview = styled('div', {\n  position: 'relative',\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  overflow: 'hidden',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  backgroundColor: '#fff',\n  backgroundImage: `url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>')`,\n  $inputStyle: '',\n  $hover: '',\n  zIndex: 1,\n  variants: {\n    active: {\n      true: {\n        $inputStyle: '$accent1'\n      }\n    }\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    backgroundColor: 'currentColor',\n    zIndex: 1\n  }\n});\nconst PickerContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst PickerWrapper = styled('div', {\n  width: '$colorPickerWidth',\n  height: '$colorPickerHeight',\n  '.react-colorful': {\n    width: '100%',\n    height: '100%',\n    boxShadow: '$level2',\n    cursor: 'crosshair'\n  },\n  '.react-colorful__saturation': {\n    borderRadius: '$sm $sm 0 0'\n  },\n  '.react-colorful__alpha, .react-colorful__hue': {\n    height: 10\n  },\n  '.react-colorful__last-control': {\n    borderRadius: '0 0 $sm $sm'\n  },\n  '.react-colorful__pointer': {\n    height: 12,\n    width: 12\n  }\n});\n\nfunction convertToRgb(value, format) {\n  return format !== 'rgb' ? colord(value).toRgb() : value;\n}\n\nfunction Color({\n  value,\n  displayValue,\n  settings,\n  onUpdate\n}) {\n  const {\n    emitOnEditStart,\n    emitOnEditEnd\n  } = useInputContext();\n  const {\n    format,\n    hasAlpha\n  } = settings;\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const timer = useRef(0);\n  const [initialRgb, setInitialRgb] = useState(() => convertToRgb(value, format));\n  const ColorPicker = hasAlpha ? RgbaColorPicker : RgbColorPicker;\n\n  const showPicker = () => {\n    setInitialRgb(convertToRgb(value, format));\n    show();\n    emitOnEditStart();\n  };\n\n  const hidePicker = () => {\n    hide();\n    emitOnEditEnd();\n    window.clearTimeout(timer.current);\n  };\n\n  const hideAfterDelay = () => {\n    timer.current = window.setTimeout(hidePicker, 500);\n  };\n\n  useEffect(() => {\n    return () => window.clearTimeout(timer.current);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(ColorPreview, {\n    ref: popinRef,\n    active: shown,\n    onClick: () => showPicker(),\n    style: {\n      color: displayValue\n    }\n  }), shown && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hidePicker\n  }), React.createElement(PickerWrapper, {\n    ref: wrapperRef,\n    onMouseEnter: () => window.clearTimeout(timer.current),\n    onMouseLeave: e => e.buttons === 0 && hideAfterDelay()\n  }, React.createElement(ColorPicker, {\n    color: initialRgb,\n    onChange: onUpdate\n  }))));\n}\nfunction ColorComponent() {\n  const {\n    value,\n    displayValue,\n    label,\n    onChange,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(PickerContainer, null, React.createElement(Color, {\n    value: value,\n    displayValue: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate,\n    settings: settings\n  }), React.createElement(ValueInput, {\n    value: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate\n  })));\n}\n\nvar color = createInternalPlugin(_objectSpread2({\n  component: ColorComponent\n}, props$2));\n\nfunction Vector3dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }));\n}\n\nvar vector3d = createInternalPlugin(_objectSpread2({\n  component: Vector3dComponent\n}, getVectorPlugin(['x', 'y', 'z'])));\n\nconst JoystickTrigger = styled('div', {\n  $flexCenter: '',\n  position: 'relative',\n  backgroundColor: '$elevation3',\n  borderRadius: '$sm',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $draggable: '',\n  $hover: '',\n  '&:active': {\n    cursor: 'none'\n  },\n  '&::after': {\n    content: '\"\"',\n    backgroundColor: '$accent2',\n    height: 4,\n    width: 4,\n    borderRadius: 2\n  }\n});\nconst JoystickPlayground = styled('div', {\n  $flexCenter: '',\n  width: '$joystickWidth',\n  height: '$joystickHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  position: 'fixed',\n  zIndex: 10000,\n  overflow: 'hidden',\n  $draggable: '',\n  transform: 'translate(-50%, -50%)',\n  variants: {\n    isOutOfBounds: {\n      true: {\n        backgroundColor: '$elevation1'\n      },\n      false: {\n        backgroundColor: '$elevation3'\n      }\n    }\n  },\n  '> div': {\n    position: 'absolute',\n    $flexCenter: '',\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: '$highlight1',\n    backgroundColor: '$elevation3',\n    width: '80%',\n    height: '80%',\n    '&::after,&::before': {\n      content: '\"\"',\n      position: 'absolute',\n      zindex: 10,\n      backgroundColor: '$highlight1'\n    },\n    '&::before': {\n      width: '100%',\n      height: 1\n    },\n    '&::after': {\n      height: '100%',\n      width: 1\n    }\n  },\n  '> span': {\n    position: 'relative',\n    zindex: 100,\n    width: 10,\n    height: 10,\n    backgroundColor: '$accent2',\n    borderRadius: '50%'\n  }\n});\n\nfunction Joystick({\n  value,\n  settings,\n  onUpdate\n}) {\n  const timeout = useRef();\n  const outOfBoundsX = useRef(0);\n  const outOfBoundsY = useRef(0);\n  const stepMultiplier = useRef(1);\n  const [joystickShown, setShowJoystick] = useState(false);\n  const [isOutOfBounds, setIsOutOfBounds] = useState(false);\n  const [spanRef, set] = useTransform();\n  const joystickeRef = useRef(null);\n  const playgroundRef = useRef(null);\n  useLayoutEffect(() => {\n    if (joystickShown) {\n      const {\n        top,\n        left,\n        width,\n        height\n      } = joystickeRef.current.getBoundingClientRect();\n      playgroundRef.current.style.left = left + width / 2 + 'px';\n      playgroundRef.current.style.top = top + height / 2 + 'px';\n    }\n  }, [joystickShown]);\n  const {\n    keys: [v1, v2],\n    joystick\n  } = settings;\n  const yFactor = joystick === 'invertY' ? 1 : -1;\n  const {\n    [v1]: {\n      step: stepV1\n    },\n    [v2]: {\n      step: stepV2\n    }\n  } = settings;\n  const wpx = useTh('sizes', 'joystickWidth');\n  const hpx = useTh('sizes', 'joystickHeight');\n  const w = parseFloat(wpx) * 0.8 / 2;\n  const h = parseFloat(hpx) * 0.8 / 2;\n  const startOutOfBounds = useCallback(() => {\n    if (timeout.current) return;\n    setIsOutOfBounds(true);\n    if (outOfBoundsX.current) set({\n      x: outOfBoundsX.current * w\n    });\n    if (outOfBoundsY.current) set({\n      y: outOfBoundsY.current * -h\n    });\n    timeout.current = window.setInterval(() => {\n      onUpdate(v => {\n        const incX = stepV1 * outOfBoundsX.current * stepMultiplier.current;\n        const incY = yFactor * stepV2 * outOfBoundsY.current * stepMultiplier.current;\n        return Array.isArray(v) ? {\n          [v1]: v[0] + incX,\n          [v2]: v[1] + incY\n        } : {\n          [v1]: v[v1] + incX,\n          [v2]: v[v2] + incY\n        };\n      });\n    }, 16);\n  }, [w, h, onUpdate, set, stepV1, stepV2, v1, v2, yFactor]);\n  const endOutOfBounds = useCallback(() => {\n    window.clearTimeout(timeout.current);\n    timeout.current = undefined;\n    setIsOutOfBounds(false);\n  }, []);\n  useEffect(() => {\n    function setStepMultiplier(event) {\n      stepMultiplier.current = multiplyStep(event);\n    }\n\n    window.addEventListener('keydown', setStepMultiplier);\n    window.addEventListener('keyup', setStepMultiplier);\n    return () => {\n      window.clearTimeout(timeout.current);\n      window.removeEventListener('keydown', setStepMultiplier);\n      window.removeEventListener('keyup', setStepMultiplier);\n    };\n  }, []);\n  const bind = useDrag(({\n    first,\n    active,\n    delta: [dx, dy],\n    movement: [mx, my]\n  }) => {\n    if (first) setShowJoystick(true);\n\n    const _x = clamp(mx, -w, w);\n\n    const _y = clamp(my, -h, h);\n\n    outOfBoundsX.current = Math.abs(mx) > Math.abs(_x) ? Math.sign(mx - _x) : 0;\n    outOfBoundsY.current = Math.abs(my) > Math.abs(_y) ? Math.sign(_y - my) : 0;\n    let newX = value[v1];\n    let newY = value[v2];\n\n    if (active) {\n      if (!outOfBoundsX.current) {\n        newX += dx * stepV1 * stepMultiplier.current;\n        set({\n          x: _x\n        });\n      }\n\n      if (!outOfBoundsY.current) {\n        newY -= yFactor * dy * stepV2 * stepMultiplier.current;\n        set({\n          y: _y\n        });\n      }\n\n      if (outOfBoundsX.current || outOfBoundsY.current) startOutOfBounds();else endOutOfBounds();\n      onUpdate({\n        [v1]: newX,\n        [v2]: newY\n      });\n    } else {\n      setShowJoystick(false);\n      outOfBoundsX.current = 0;\n      outOfBoundsY.current = 0;\n      set({\n        x: 0,\n        y: 0\n      });\n      endOutOfBounds();\n    }\n  });\n  return React.createElement(JoystickTrigger, _extends({\n    ref: joystickeRef\n  }, bind()), joystickShown && React.createElement(Portal, null, React.createElement(JoystickPlayground, {\n    ref: playgroundRef,\n    isOutOfBounds: isOutOfBounds\n  }, React.createElement(\"div\", null), React.createElement(\"span\", {\n    ref: spanRef\n  }))));\n}\n\nconst Container$1 = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  variants: {\n    withJoystick: {\n      true: {\n        gridTemplateColumns: '$sizes$rowHeight auto'\n      },\n      false: {\n        gridTemplateColumns: 'auto'\n      }\n    }\n  }\n});\nfunction Vector2dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container$1, {\n    withJoystick: !!settings.joystick\n  }, settings.joystick && React.createElement(Joystick, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  })));\n}\n\nconst _excluded$7 = [\"joystick\"];\nconst plugin = getVectorPlugin(['x', 'y']);\n\nconst normalize$2 = _ref => {\n  let {\n    joystick = true\n  } = _ref,\n      input = _objectWithoutProperties(_ref, _excluded$7);\n\n  const {\n    value,\n    settings\n  } = plugin.normalize(input);\n  return {\n    value,\n    settings: _objectSpread2(_objectSpread2({}, settings), {}, {\n      joystick\n    })\n  };\n};\n\nvar vector2d = createInternalPlugin(_objectSpread2(_objectSpread2({\n  component: Vector2dComponent\n}, plugin), {}, {\n  normalize: normalize$2\n}));\n\nconst sanitize$1 = v => {\n  if (v === undefined) return undefined;\n\n  if (v instanceof File) {\n    try {\n      return URL.createObjectURL(v);\n    } catch (e) {\n      return undefined;\n    }\n  }\n\n  if (typeof v === 'string' && v.indexOf('blob:') === 0) return v;\n  throw Error(`Invalid image format [undefined | blob |Â File].`);\n};\nconst schema$1 = (_o, s) => typeof s === 'object' && 'image' in s;\nconst normalize$1 = ({\n  image\n}) => {\n  return {\n    value: image\n  };\n};\n\nvar props$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  sanitize: sanitize$1,\n  schema: schema$1,\n  normalize: normalize$1\n});\n\nconst ImageContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto 20px',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst DropZone = styled('div', {\n  $flexCenter: '',\n  overflow: 'hidden',\n  height: '$rowHeight',\n  background: '$elevation3',\n  textAlign: 'center',\n  color: 'inherit',\n  borderRadius: '$sm',\n  outline: 'none',\n  userSelect: 'none',\n  cursor: 'pointer',\n  $inputStyle: '',\n  $hover: '',\n  $focusWithin: '',\n  $active: '$accent1 $elevation1',\n  variants: {\n    isDragAccept: {\n      true: {\n        $inputStyle: '$accent1',\n        backgroundColor: '$elevation1'\n      }\n    }\n  }\n});\nconst ImagePreview = styled('div', {\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  variants: {\n    hasImage: {\n      true: {\n        cursor: 'pointer',\n        $hover: '',\n        $active: ''\n      }\n    }\n  }\n});\nconst ImageLargePreview = styled('div', {\n  $flexCenter: '',\n  width: '$imagePreviewWidth',\n  height: '$imagePreviewHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  pointerEvents: 'none',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center'\n});\nconst Instructions = styled('div', {\n  fontSize: '0.8em',\n  height: '100%',\n  padding: '$rowGap $md'\n});\nconst Remove = styled('div', {\n  $flexCenter: '',\n  top: '0',\n  right: '0',\n  marginRight: '$sm',\n  height: '100%',\n  cursor: 'pointer',\n  variants: {\n    disabled: {\n      true: {\n        color: '$elevation3',\n        cursor: 'default'\n      }\n    }\n  },\n  '&::after,&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    height: 2,\n    width: 10,\n    borderRadius: 1,\n    backgroundColor: 'currentColor'\n  },\n  '&::after': {\n    transform: 'rotate(45deg)'\n  },\n  '&::before': {\n    transform: 'rotate(-45deg)'\n  }\n});\n\nfunction ImageComponent() {\n  const {\n    label,\n    value,\n    onUpdate\n  } = useInputContext();\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) onUpdate(acceptedFiles[0]);\n  }, [onUpdate]);\n  const clear = useCallback(e => {\n    e.stopPropagation();\n    onUpdate(undefined);\n  }, [onUpdate]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragAccept\n  } = useDropzone({\n    maxFiles: 1,\n    accept: 'image/*',\n    onDrop\n  });\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(ImageContainer, null, React.createElement(ImagePreview, {\n    ref: popinRef,\n    hasImage: !!value,\n    onPointerDown: () => !!value && show(),\n    onPointerUp: hide,\n    style: {\n      backgroundImage: value ? `url(${value})` : 'none'\n    }\n  }), shown && !!value && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hide,\n    style: {\n      cursor: 'pointer'\n    }\n  }), React.createElement(ImageLargePreview, {\n    ref: wrapperRef,\n    style: {\n      backgroundImage: `url(${value})`\n    }\n  })), React.createElement(DropZone, getRootProps({\n    isDragAccept\n  }), React.createElement(\"input\", getInputProps()), React.createElement(Instructions, null, isDragAccept ? 'drop image' : 'click or drop')), React.createElement(Remove, {\n    onClick: clear,\n    disabled: !value\n  })));\n}\n\nvar image = createInternalPlugin(_objectSpread2({\n  component: ImageComponent\n}, props$1));\n\nconst number = v8n().number();\nconst schema = (o, s) => v8n().array().length(2).every.number().test(o) && v8n().schema({\n  min: number,\n  max: number\n}).test(s);\nconst format = v => ({\n  min: v[0],\n  max: v[1]\n});\nconst sanitize = (value, {\n  bounds: [MIN, MAX]\n}, prevValue) => {\n  const _newValue = {\n    min: prevValue[0],\n    max: prevValue[1]\n  };\n\n  const {\n    min,\n    max\n  } = _objectSpread2(_objectSpread2({}, _newValue), value);\n\n  return [clamp(Number(min), MIN, Math.max(MIN, max)), clamp(Number(max), Math.min(MAX, min), MAX)];\n};\nconst normalize = ({\n  value,\n  min,\n  max\n}) => {\n  const boundsSettings = {\n    min,\n    max\n  };\n\n  const _settings = normalizeKeyedNumberSettings(format(value), {\n    min: boundsSettings,\n    max: boundsSettings\n  });\n\n  const bounds = [min, max];\n\n  const settings = _objectSpread2(_objectSpread2({}, _settings), {}, {\n    bounds\n  });\n\n  const _value = sanitize(format(value), settings, value);\n\n  return {\n    value: _value,\n    settings\n  };\n};\n\nvar props = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema,\n  format: format,\n  sanitize: sanitize,\n  normalize: normalize\n});\n\nconst _excluded$6 = [\"value\", \"bounds\", \"onDrag\"],\n      _excluded2$1 = [\"bounds\"];\nconst Container = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  gridTemplateColumns: 'auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)'\n});\n\nfunction IntervalSlider(_ref) {\n  let {\n    value,\n    bounds: [min, max],\n    onDrag\n  } = _ref,\n      settings = _objectWithoutProperties(_ref, _excluded$6);\n\n  const ref = useRef(null);\n  const minScrubberRef = useRef(null);\n  const maxScrubberRef = useRef(null);\n  const rangeWidth = useRef(0);\n  const scrubberWidth = useTh('sizes', 'scrubberWidth');\n  const bind = useDrag(({\n    event,\n    first,\n    xy: [x],\n    movement: [mx],\n    memo: _memo = {}\n  }) => {\n    if (first) {\n      const {\n        width,\n        left\n      } = ref.current.getBoundingClientRect();\n      rangeWidth.current = width - parseFloat(scrubberWidth);\n      const targetIsScrub = (event === null || event === void 0 ? void 0 : event.target) === minScrubberRef.current || (event === null || event === void 0 ? void 0 : event.target) === maxScrubberRef.current;\n      _memo.pos = invertedRange((x - left) / width, min, max);\n      const delta = Math.abs(_memo.pos - value.min) - Math.abs(_memo.pos - value.max);\n      _memo.key = delta < 0 || delta === 0 && _memo.pos <= value.min ? 'min' : 'max';\n      if (targetIsScrub) _memo.pos = value[_memo.key];\n    }\n\n    const newValue = _memo.pos + invertedRange(mx / rangeWidth.current, 0, max - min);\n    onDrag({\n      [_memo.key]: sanitizeStep(newValue, settings[_memo.key])\n    });\n    return _memo;\n  });\n  const minStyle = `calc(${range(value.min, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  const maxStyle = `calc(${1 - range(value.max, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  return React.createElement(RangeWrapper, _extends({\n    ref: ref\n  }, bind()), React.createElement(Range, null, React.createElement(Indicator, {\n    style: {\n      left: minStyle,\n      right: maxStyle\n    }\n  })), React.createElement(Scrubber, {\n    position: \"left\",\n    ref: minScrubberRef,\n    style: {\n      left: minStyle\n    }\n  }), React.createElement(Scrubber, {\n    position: \"right\",\n    ref: maxScrubberRef,\n    style: {\n      right: maxStyle\n    }\n  }));\n}\n\nfunction IntervalComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n\n  const _settings = _objectWithoutProperties(settings, _excluded2$1);\n\n  return React.createElement(React.Fragment, null, React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container, null, React.createElement(IntervalSlider, _extends({\n    value: displayValue\n  }, settings, {\n    onDrag: onUpdate\n  })), React.createElement(Vector, {\n    value: displayValue,\n    settings: _settings,\n    onUpdate: onUpdate,\n    innerLabelTrim: 0\n  }))));\n}\n\nvar interval = createInternalPlugin(_objectSpread2({\n  component: IntervalComponent\n}, props));\n\nconst createEventEmitter = () => {\n  const listenerMapping = new Map();\n  return {\n    on: (topic, listener) => {\n      let listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        listeners = new Set();\n        listenerMapping.set(topic, listeners);\n      }\n\n      listeners.add(listener);\n    },\n    off: (topic, listener) => {\n      const listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        return;\n      }\n\n      listeners.delete(listener);\n\n      if (listeners.size === 0) {\n        listenerMapping.delete(topic);\n      }\n    },\n    emit: (topic, ...args) => {\n      const listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        return;\n      }\n\n      for (const listener of listeners) {\n        listener(...args);\n      }\n    }\n  };\n};\n\nconst _excluded$5 = [\"type\", \"value\"],\n      _excluded2 = [\"onChange\", \"transient\", \"onEditStart\", \"onEditEnd\"];\nconst Store = function Store() {\n  const store = create(() => ({\n    data: {}\n  }));\n  const eventEmitter = createEventEmitter();\n  this.storeId = getUid();\n  this.useStore = store;\n  const folders = {};\n  const orderedPaths = new Set();\n\n  this.getVisiblePaths = () => {\n    const data = this.getData();\n    const paths = Object.keys(data);\n    const hiddenFolders = [];\n    Object.entries(folders).forEach(([path, settings]) => {\n      if (settings.render && paths.some(p => p.indexOf(path) === 0) && !settings.render(this.get)) hiddenFolders.push(path + '.');\n    });\n    const visiblePaths = [];\n    orderedPaths.forEach(path => {\n      if (path in data && data[path].__refCount > 0 && hiddenFolders.every(p => path.indexOf(p) === -1) && (!data[path].render || data[path].render(this.get))) visiblePaths.push(path);\n    });\n    return visiblePaths;\n  };\n\n  this.setOrderedPaths = newPaths => {\n    newPaths.forEach(p => orderedPaths.add(p));\n  };\n\n  this.orderPaths = paths => {\n    this.setOrderedPaths(paths);\n    return paths;\n  };\n\n  this.disposePaths = paths => {\n    store.setState(s => {\n      const data = s.data;\n      paths.forEach(path => {\n        if (path in data) {\n          const input = data[path];\n          input.__refCount--;\n\n          if (input.__refCount === 0 && input.type in SpecialInputs) {\n            delete data[path];\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.dispose = () => {\n    store.setState(() => {\n      return {\n        data: {}\n      };\n    });\n  };\n\n  this.getFolderSettings = path => {\n    return folders[path] || {};\n  };\n\n  this.getData = () => {\n    return store.getState().data;\n  };\n\n  this.addData = (newData, override) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(newData).forEach(([path, newInputData]) => {\n        let input = data[path];\n\n        if (!!input) {\n          const {\n            type,\n            value\n          } = newInputData,\n                rest = _objectWithoutProperties(newInputData, _excluded$5);\n\n          if (type !== input.type) {\n            warn(LevaErrors.INPUT_TYPE_OVERRIDE, type);\n          } else {\n            if (input.__refCount === 0 || override) {\n              Object.assign(input, rest);\n            }\n\n            input.__refCount++;\n          }\n        } else {\n          data[path] = _objectSpread2(_objectSpread2({}, newInputData), {}, {\n            __refCount: 1\n          });\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.setValueAtPath = (path, value, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      updateInput(data[path], value, path, this, fromPanel);\n      return {\n        data\n      };\n    });\n  };\n\n  this.setSettingsAtPath = (path, settings) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].settings = _objectSpread2(_objectSpread2({}, data[path].settings), settings);\n      return {\n        data\n      };\n    });\n  };\n\n  this.disableInputAtPath = (path, flag) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].disabled = flag;\n      return {\n        data\n      };\n    });\n  };\n\n  this.set = (values, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(values).forEach(([path, value]) => {\n        try {\n          updateInput(data[path], value, undefined, undefined, fromPanel);\n        } catch (_unused) {}\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.getInput = path => {\n    try {\n      return this.getData()[path];\n    } catch (e) {\n      warn(LevaErrors.PATH_DOESNT_EXIST, path);\n    }\n  };\n\n  this.get = path => {\n    var _this$getInput;\n\n    return (_this$getInput = this.getInput(path)) === null || _this$getInput === void 0 ? void 0 : _this$getInput.value;\n  };\n\n  this.emitOnEditStart = path => {\n    eventEmitter.emit(`onEditStart:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n\n  this.emitOnEditEnd = path => {\n    eventEmitter.emit(`onEditEnd:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n\n  this.subscribeToEditStart = (path, listener) => {\n    eventEmitter.on(`onEditStart:${path}`, listener);\n    return () => eventEmitter.off(path, listener);\n  };\n\n  this.subscribeToEditEnd = (path, listener) => {\n    eventEmitter.on(`onEditEnd:${path}`, listener);\n    return () => eventEmitter.off(path, listener);\n  };\n\n  const _getDataFromSchema = (schema, rootPath, mappedPaths) => {\n    const data = {};\n    Object.entries(schema).forEach(([key, rawInput]) => {\n      if (key === '') return warn(LevaErrors.EMPTY_KEY);\n      let newPath = join(rootPath, key);\n\n      if (rawInput.type === SpecialInputs.FOLDER) {\n        const newData = _getDataFromSchema(rawInput.schema, newPath, mappedPaths);\n\n        Object.assign(data, newData);\n        if (!(newPath in folders)) folders[newPath] = rawInput.settings;\n      } else if (key in mappedPaths) {\n        warn(LevaErrors.DUPLICATE_KEYS, key, newPath, mappedPaths[key].path);\n      } else {\n        const normalizedInput = normalizeInput(rawInput, key, newPath, data);\n\n        if (normalizedInput) {\n          const {\n            type,\n            options,\n            input\n          } = normalizedInput;\n\n          const {\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          } = options,\n                _options = _objectWithoutProperties(options, _excluded2);\n\n          data[newPath] = _objectSpread2(_objectSpread2(_objectSpread2({\n            type\n          }, _options), input), {}, {\n            fromPanel: true\n          });\n          mappedPaths[key] = {\n            path: newPath,\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          };\n        } else {\n          warn(LevaErrors.UNKNOWN_INPUT, newPath, rawInput);\n        }\n      }\n    });\n    return data;\n  };\n\n  this.getDataFromSchema = schema => {\n    const mappedPaths = {};\n\n    const data = _getDataFromSchema(schema, '', mappedPaths);\n\n    return [data, mappedPaths];\n  };\n};\nconst levaStore = new Store();\nfunction useCreateStore() {\n  return useMemo(() => new Store(), []);\n}\n\nif (process.env.NODE_ENV === 'development' && typeof window !== 'undefined') {\n  window.__STORE = levaStore;\n}\n\nconst defaultSettings$1 = {\n  collapsed: false\n};\nfunction folder(schema, settings) {\n  return {\n    type: SpecialInputs.FOLDER,\n    schema,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings$1), settings)\n  };\n}\n\nfunction button(onClick) {\n  return {\n    type: SpecialInputs.BUTTON,\n    onClick\n  };\n}\n\nfunction buttonGroup(opts) {\n  return {\n    type: SpecialInputs.BUTTON_GROUP,\n    opts\n  };\n}\n\nconst defaultSettings = {\n  graph: false,\n  interval: 100\n};\nfunction monitor(objectOrFn, settings) {\n  return {\n    type: SpecialInputs.MONITOR,\n    objectOrFn,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings), settings)\n  };\n}\n\nconst isInput = v => '__levaInput' in v;\nconst buildTree = (paths, filter) => {\n  const tree = {};\n\n  const _filter = filter ? filter.toLowerCase() : null;\n\n  paths.forEach(path => {\n    const [valueKey, folderPath] = getKeyPath(path);\n\n    if (!_filter || valueKey.toLowerCase().indexOf(_filter) > -1) {\n      merge(tree, folderPath, {\n        [valueKey]: {\n          __levaInput: true,\n          path\n        }\n      });\n    }\n  });\n  return tree;\n};\n\nfunction FolderTitle({\n  toggle,\n  toggled,\n  name\n}) {\n  return React.createElement(StyledTitle, {\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled\n  }), React.createElement(\"div\", null, name));\n}\n\nconst _excluded$4 = [\"type\", \"label\", \"path\", \"valueKey\", \"value\", \"settings\", \"setValue\", \"disabled\"];\nfunction ControlInput(_ref) {\n  let {\n    type,\n    label,\n    path,\n    valueKey,\n    value,\n    settings,\n    setValue,\n    disabled\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded$4);\n\n  const {\n    displayValue,\n    onChange,\n    onUpdate\n  } = useInputSetters({\n    type,\n    value,\n    settings,\n    setValue\n  });\n  const Input = Plugins[type].component;\n\n  if (!Input) {\n    warn(LevaErrors.NO_COMPONENT_FOR_TYPE, type, path);\n    return null;\n  }\n\n  return React.createElement(InputContext.Provider, {\n    value: _objectSpread2({\n      key: valueKey,\n      path,\n      id: '' + path,\n      label,\n      displayValue,\n      value,\n      onChange,\n      onUpdate,\n      settings,\n      setValue,\n      disabled\n    }, rest)\n  }, React.createElement(StyledInputWrapper, {\n    disabled: disabled\n  }, React.createElement(Input, null)));\n}\n\nconst StyledButton = styled('button', {\n  display: 'block',\n  $reset: '',\n  fontWeight: '$button',\n  color: '$highlight3',\n  height: '$rowHeight',\n  borderStyle: 'none',\n  borderRadius: '$sm',\n  backgroundColor: '$accent2',\n  cursor: 'pointer',\n  $hover: '$accent3',\n  $active: '$accent3 $accent1',\n  $focus: ''\n});\n\nfunction Button({\n  onClick,\n  label\n}) {\n  return React.createElement(Row, null, React.createElement(StyledButton, {\n    onClick: () => onClick()\n  }, label));\n}\n\nconst StyledButtonGroup = styled('div', {\n  $flex: '',\n  justifyContent: 'flex-end',\n  gap: '$colGap'\n});\n\nconst StyledButtonGroupButton = styled('button', {\n  $reset: '',\n  cursor: 'pointer',\n  borderRadius: '$xs',\n  '&:hover': {\n    backgroundColor: '$elevation3'\n  }\n});\n\nconst getOpts = ({\n  label: _label,\n  opts: _opts\n}) => {\n  let label = typeof _label === 'string' ? _label.trim() === '' ? null : _label : _label;\n  let opts = _opts;\n\n  if (typeof _opts.opts === 'object') {\n    if (opts.label !== undefined) {\n      label = _opts.label;\n    }\n\n    opts = _opts.opts;\n  }\n\n  return {\n    label,\n    opts: opts\n  };\n};\n\nfunction ButtonGroup(props) {\n  const {\n    label,\n    opts\n  } = getOpts(props);\n  return React.createElement(Row, {\n    input: !!label\n  }, label && React.createElement(Label, null, label), React.createElement(StyledButtonGroup, null, Object.entries(opts).map(([label, onClick]) => React.createElement(StyledButtonGroupButton, {\n    key: label,\n    onClick: () => onClick()\n  }, label))));\n}\n\nconst Canvas = styled('canvas', {\n  height: '$monitorHeight',\n  width: '100%',\n  display: 'block',\n  borderRadius: '$sm'\n});\n\nconst POINTS = 100;\n\nfunction push(arr, val) {\n  arr.push(val);\n  if (arr.length > POINTS) arr.shift();\n}\n\nconst MonitorCanvas = forwardRef(function ({\n  initialValue\n}, ref) {\n  const accentColor = useTh('colors', 'highlight3');\n  const backgroundColor = useTh('colors', 'elevation2');\n  const fillColor = useTh('colors', 'highlight1');\n  const [gradientTop, gradientBottom] = useMemo(() => {\n    return [colord(fillColor).alpha(0.4).toRgbString(), colord(fillColor).alpha(0.1).toRgbString()];\n  }, [fillColor]);\n  const points = useRef([initialValue]);\n  const min = useRef(initialValue);\n  const max = useRef(initialValue);\n  const raf = useRef();\n  const drawPlot = useCallback((_canvas, _ctx) => {\n    if (!_canvas) return;\n    const {\n      width,\n      height\n    } = _canvas;\n    const path = new Path2D();\n    const interval = width / POINTS;\n    const verticalPadding = height * 0.05;\n\n    for (let i = 0; i < points.current.length; i++) {\n      const p = range(points.current[i], min.current, max.current);\n      const x = interval * i;\n      const y = height - p * (height - verticalPadding * 2) - verticalPadding;\n      path.lineTo(x, y);\n    }\n\n    _ctx.clearRect(0, 0, width, height);\n\n    const gradientPath = new Path2D(path);\n    gradientPath.lineTo(interval * (points.current.length + 1), height);\n    gradientPath.lineTo(0, height);\n    gradientPath.lineTo(0, 0);\n\n    const gradient = _ctx.createLinearGradient(0, 0, 0, height);\n\n    gradient.addColorStop(0.0, gradientTop);\n    gradient.addColorStop(1.0, gradientBottom);\n    _ctx.fillStyle = gradient;\n\n    _ctx.fill(gradientPath);\n\n    _ctx.strokeStyle = backgroundColor;\n    _ctx.lineJoin = 'round';\n    _ctx.lineWidth = 14;\n\n    _ctx.stroke(path);\n\n    _ctx.strokeStyle = accentColor;\n    _ctx.lineWidth = 2;\n\n    _ctx.stroke(path);\n  }, [accentColor, backgroundColor, gradientTop, gradientBottom]);\n  const [canvas, ctx] = useCanvas2d(drawPlot);\n  useImperativeHandle(ref, () => ({\n    frame: val => {\n      if (min.current === undefined || val < min.current) min.current = val;\n      if (max.current === undefined || val > max.current) max.current = val;\n      push(points.current, val);\n      raf.current = requestAnimationFrame(() => drawPlot(canvas.current, ctx.current));\n    }\n  }), [canvas, ctx, drawPlot]);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  return React.createElement(Canvas, {\n    ref: canvas\n  });\n});\n\nconst parse = val => Number.isFinite(val) ? val.toPrecision(2) : val.toString();\n\nconst MonitorLog = forwardRef(function ({\n  initialValue\n}, ref) {\n  const [val, set] = useState(parse(initialValue));\n  useImperativeHandle(ref, () => ({\n    frame: v => set(parse(v))\n  }), []);\n  return React.createElement(\"div\", null, val);\n});\n\nfunction getValue(o) {\n  return typeof o === 'function' ? o() : o.current;\n}\n\nfunction Monitor({\n  label,\n  objectOrFn,\n  settings\n}) {\n  const ref = useRef();\n  const initialValue = useRef(getValue(objectOrFn));\n  useEffect(() => {\n    const timeout = window.setInterval(() => {\n      var _ref$current;\n\n      if (document.hidden) return;\n      (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.frame(getValue(objectOrFn));\n    }, settings.interval);\n    return () => window.clearInterval(timeout);\n  }, [objectOrFn, settings.interval]);\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, {\n    align: \"top\"\n  }, label), settings.graph ? React.createElement(MonitorCanvas, {\n    ref: ref,\n    initialValue: initialValue.current\n  }) : React.createElement(MonitorLog, {\n    ref: ref,\n    initialValue: initialValue.current\n  }));\n}\n\nconst _excluded$3 = [\"type\", \"label\", \"key\"];\nconst specialComponents = {\n  [SpecialInputs.BUTTON]: Button,\n  [SpecialInputs.BUTTON_GROUP]: ButtonGroup,\n  [SpecialInputs.MONITOR]: Monitor\n};\nconst Control = React.memo(({\n  path\n}) => {\n  const [input, {\n    set,\n    setSettings,\n    disable,\n    storeId,\n    emitOnEditStart,\n    emitOnEditEnd\n  }] = useInput(path);\n  if (!input) return null;\n\n  const {\n    type,\n    label,\n    key\n  } = input,\n        inputProps = _objectWithoutProperties(input, _excluded$3);\n\n  if (type in SpecialInputs) {\n    const SpecialInputForType = specialComponents[type];\n    return React.createElement(SpecialInputForType, _extends({\n      label: label,\n      path: path\n    }, inputProps));\n  }\n\n  if (!(type in Plugins)) {\n    log(LevaErrors.UNSUPPORTED_INPUT, type, path);\n    return null;\n  }\n\n  return React.createElement(ControlInput, _extends({\n    key: storeId + path,\n    type: type,\n    label: label,\n    storeId: storeId,\n    path: path,\n    valueKey: key,\n    setValue: set,\n    setSettings: setSettings,\n    disable: disable,\n    emitOnEditStart: emitOnEditStart,\n    emitOnEditEnd: emitOnEditEnd\n  }, inputProps));\n});\n\nconst Folder = ({\n  name,\n  path,\n  tree\n}) => {\n  const store = useStoreContext();\n  const newPath = join(path, name);\n  const {\n    collapsed,\n    color\n  } = store.getFolderSettings(newPath);\n  const [toggled, setToggle] = useState(!collapsed);\n  const folderRef = useRef(null);\n  const widgetColor = useTh('colors', 'folderWidgetColor');\n  const textColor = useTh('colors', 'folderTextColor');\n  useLayoutEffect(() => {\n    folderRef.current.style.setProperty('--leva-colors-folderWidgetColor', color || widgetColor);\n    folderRef.current.style.setProperty('--leva-colors-folderTextColor', color || textColor);\n  }, [color, widgetColor, textColor]);\n  return React.createElement(StyledFolder, {\n    ref: folderRef\n  }, React.createElement(FolderTitle, {\n    name: name,\n    toggled: toggled,\n    toggle: () => setToggle(t => !t)\n  }), React.createElement(TreeWrapper, {\n    parent: newPath,\n    tree: tree,\n    toggled: toggled\n  }));\n};\n\nconst TreeWrapper = React.memo(({\n  isRoot: _isRoot = false,\n  fill: _fill = false,\n  flat: _flat = false,\n  parent,\n  tree,\n  toggled\n}) => {\n  const {\n    wrapperRef,\n    contentRef\n  } = useToggle(toggled);\n  return React.createElement(StyledWrapper, {\n    ref: wrapperRef,\n    isRoot: _isRoot,\n    fill: _fill,\n    flat: _flat\n  }, React.createElement(StyledContent, {\n    ref: contentRef,\n    isRoot: _isRoot,\n    toggled: toggled\n  }, Object.entries(tree).map(([key, value]) => isInput(value) ? React.createElement(Control, {\n    key: value.path,\n    valueKey: value.valueKey,\n    path: value.path\n  }) : React.createElement(Folder, {\n    key: key,\n    name: key,\n    path: parent,\n    tree: value\n  }))));\n});\n\nconst StyledRoot = styled('div', {\n  position: 'relative',\n  fontFamily: '$mono',\n  fontSize: '$root',\n  color: '$rootText',\n  backgroundColor: '$elevation1',\n  variants: {\n    fill: {\n      false: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        zIndex: 1000,\n        width: '$rootWidth'\n      },\n      true: {\n        position: 'relative',\n        width: '100%'\n      }\n    },\n    flat: {\n      false: {\n        borderRadius: '$lg',\n        boxShadow: '$level1'\n      }\n    },\n    oneLineLabels: {\n      true: {\n        [`${StyledInputRow}`]: {\n          gridTemplateColumns: 'auto',\n          gridAutoColumns: 'minmax(max-content, 1fr)',\n          gridAutoRows: 'minmax($sizes$rowHeight), auto)',\n          rowGap: 0,\n          columnGap: 0,\n          marginTop: '$rowGap'\n        }\n      }\n    },\n    hideTitleBar: {\n      true: {\n        $$titleBarHeight: '0px'\n      },\n      false: {\n        $$titleBarHeight: '$sizes$titleBarHeight'\n      }\n    }\n  },\n  '&,*,*:after,*:before': {\n    boxSizing: 'border-box'\n  },\n  '*::selection': {\n    backgroundColor: '$accent2'\n  }\n});\n\nconst iconWidth = 40;\nconst Icon = styled('i', {\n  $flexCenter: '',\n  width: iconWidth,\n  userSelect: 'none',\n  cursor: 'pointer',\n  '> svg': {\n    fill: '$highlight1',\n    transition: 'transform 350ms ease, fill 250ms ease'\n  },\n  '&:hover > svg': {\n    fill: '$highlight3'\n  },\n  variants: {\n    active: {\n      true: {\n        '> svg': {\n          fill: '$highlight2'\n        }\n      }\n    }\n  }\n});\nconst StyledTitleWithFilter = styled('div', {\n  display: 'flex',\n  alignItems: 'stretch',\n  justifyContent: 'space-between',\n  height: '$titleBarHeight',\n  variants: {\n    mode: {\n      drag: {\n        cursor: 'grab'\n      }\n    }\n  }\n});\nconst FilterWrapper = styled('div', {\n  $flex: '',\n  position: 'relative',\n  width: '100%',\n  overflow: 'hidden',\n  transition: 'height 250ms ease',\n  color: '$highlight3',\n  paddingLeft: '$md',\n  [`> ${Icon}`]: {\n    height: 30\n  },\n  variants: {\n    toggled: {\n      true: {\n        height: 30\n      },\n      false: {\n        height: 0\n      }\n    }\n  }\n});\nconst StyledFilterInput = styled('input', {\n  $reset: '',\n  flex: 1,\n  position: 'relative',\n  height: 30,\n  width: '100%',\n  backgroundColor: 'transparent',\n  fontSize: '10px',\n  borderRadius: '$root',\n  '&:focus': {},\n  '&::placeholder': {\n    color: '$highlight2'\n  }\n});\nconst TitleContainer = styled('div', {\n  $flexCenter: '',\n  flex: 1,\n  '> svg': {\n    fill: '$highlight1'\n  },\n  color: '$highlight1',\n  variants: {\n    drag: {\n      true: {\n        $draggable: '',\n        '> svg': {\n          transition: 'fill 250ms ease'\n        },\n        '&:hover': {\n          color: '$highlight3'\n        },\n        '&:hover > svg': {\n          fill: '$highlight3'\n        }\n      }\n    },\n    filterEnabled: {\n      false: {\n        paddingRight: iconWidth\n      }\n    }\n  }\n});\n\nconst FilterInput = React.forwardRef(({\n  setFilter,\n  toggle\n}, ref) => {\n  const [value, set] = useState('');\n  const debouncedOnChange = useMemo(() => debounce(setFilter, 250), [setFilter]);\n\n  const clear = () => {\n    setFilter('');\n    set('');\n  };\n\n  const _onChange = e => {\n    const v = e.currentTarget.value;\n    toggle(true);\n    set(v);\n  };\n\n  useEffect(() => {\n    debouncedOnChange(value);\n  }, [value, debouncedOnChange]);\n  return React.createElement(React.Fragment, null, React.createElement(StyledFilterInput, {\n    ref: ref,\n    value: value,\n    placeholder: \"[Open filter with CMD+SHIFT+L]\",\n    onPointerDown: e => e.stopPropagation(),\n    onChange: _onChange\n  }), React.createElement(Icon, {\n    onClick: () => clear(),\n    style: {\n      visibility: value ? 'visible' : 'hidden'\n    }\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"14\",\n    width: \"14\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n    clipRule: \"evenodd\"\n  }))));\n});\nfunction TitleWithFilter({\n  setFilter,\n  onDrag,\n  toggle,\n  toggled,\n  title,\n  drag,\n  filterEnabled\n}) {\n  const [filterShown, setShowFilter] = useState(false);\n  const inputRef = useRef(null);\n  useEffect(() => {\n    var _inputRef$current, _inputRef$current2;\n\n    if (filterShown) (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();else (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.blur();\n  }, [filterShown]);\n  const bind = useDrag$1(({\n    offset: [x, y]\n  }) => onDrag({\n    x,\n    y\n  }), {\n    filterTaps: true\n  });\n  useEffect(() => {\n    const handleShortcut = event => {\n      if (event.key === 'L' && event.shiftKey && event.metaKey) {\n        setShowFilter(f => !f);\n      }\n    };\n\n    window.addEventListener('keydown', handleShortcut);\n    return () => window.removeEventListener('keydown', handleShortcut);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(StyledTitleWithFilter, {\n    mode: drag ? 'drag' : undefined\n  }, React.createElement(Icon, {\n    active: !toggled,\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled,\n    width: 12,\n    height: 8\n  })), React.createElement(TitleContainer, _extends({}, drag ? bind() : {}, {\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), title === undefined && drag ? React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"10\",\n    viewBox: \"0 0 28 14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"12\",\n    r: \"2\"\n  })) : title), filterEnabled && React.createElement(Icon, {\n    active: filterShown,\n    onClick: () => setShowFilter(f => !f)\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"20\",\n    viewBox: \"0 0 20 20\"\n  }, React.createElement(\"path\", {\n    d: \"M9 9a2 2 0 114 0 2 2 0 01-4 0z\"\n  }), React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z\",\n    clipRule: \"evenodd\"\n  })))), React.createElement(FilterWrapper, {\n    toggled: filterShown\n  }, React.createElement(FilterInput, {\n    ref: inputRef,\n    setFilter: setFilter,\n    toggle: toggle\n  })));\n}\n\nconst _excluded$2 = [\"store\", \"hidden\", \"theme\", \"collapsed\"];\nfunction LevaRoot(_ref) {\n  let {\n    store,\n    hidden = false,\n    theme,\n    collapsed = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$2);\n\n  const themeContext = useDeepMemo(() => mergeTheme(theme), [theme]);\n  const [toggled, setToggle] = useState(!collapsed);\n  const computedToggled = typeof collapsed === 'object' ? !collapsed.collapsed : toggled;\n  const computedSetToggle = useMemo(() => {\n    if (typeof collapsed === 'object') {\n      return value => {\n        if (typeof value === 'function') {\n          collapsed.onChange(!value(!collapsed.collapsed));\n        } else {\n          collapsed.onChange(!value);\n        }\n      };\n    }\n\n    return setToggle;\n  }, [collapsed]);\n  if (!store || hidden) return null;\n  return React.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React.createElement(LevaCore, _extends({\n    store: store\n  }, props, {\n    toggled: computedToggled,\n    setToggle: computedSetToggle,\n    rootClass: themeContext.className\n  })));\n}\nconst LevaCore = React.memo(({\n  store,\n  rootClass,\n  fill: _fill = false,\n  flat: _flat = false,\n  oneLineLabels: _oneLineLabels = false,\n  titleBar: _titleBar = {\n    title: undefined,\n    drag: true,\n    filter: true\n  },\n  hideCopyButton: _hideCopyButton = false,\n  toggled,\n  setToggle\n}) => {\n  var _titleBar$drag, _titleBar$filter;\n\n  const paths = useVisiblePaths(store);\n  const [filter, setFilter] = useState('');\n  const tree = useMemo(() => buildTree(paths, filter), [paths, filter]);\n  const [rootRef, set] = useTransform();\n  const shouldShow = paths.length > 0;\n  const title = typeof _titleBar === 'object' ? _titleBar.title || undefined : undefined;\n  const drag = typeof _titleBar === 'object' ? (_titleBar$drag = _titleBar.drag) !== null && _titleBar$drag !== void 0 ? _titleBar$drag : true : true;\n  const filterEnabled = typeof _titleBar === 'object' ? (_titleBar$filter = _titleBar.filter) !== null && _titleBar$filter !== void 0 ? _titleBar$filter : true : true;\n  return React.createElement(PanelSettingsContext.Provider, {\n    value: {\n      hideCopyButton: _hideCopyButton\n    }\n  }, React.createElement(StyledRoot, {\n    ref: rootRef,\n    className: rootClass,\n    fill: _fill,\n    flat: _flat,\n    oneLineLabels: _oneLineLabels,\n    hideTitleBar: !_titleBar,\n    style: {\n      display: shouldShow ? 'block' : 'none'\n    }\n  }, _titleBar && React.createElement(TitleWithFilter, {\n    onDrag: set,\n    setFilter: setFilter,\n    toggle: flag => setToggle(t => flag !== null && flag !== void 0 ? flag : !t),\n    toggled: toggled,\n    title: title,\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), shouldShow && React.createElement(StoreContext.Provider, {\n    value: store\n  }, React.createElement(TreeWrapper, {\n    isRoot: true,\n    fill: _fill,\n    flat: _flat,\n    tree: tree,\n    toggled: toggled\n  }))));\n});\n\nconst _excluded$1 = [\"isRoot\"];\nlet rootInitialized = false;\nlet rootEl = null;\nfunction Leva(_ref) {\n  let {\n    isRoot = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$1);\n\n  useEffect(() => {\n    rootInitialized = true;\n\n    if (!isRoot && rootEl) {\n      rootEl.remove();\n      rootEl = null;\n    }\n\n    return () => {\n      if (!isRoot) rootInitialized = false;\n    };\n  }, [isRoot]);\n  return React.createElement(LevaRoot, _extends({\n    store: levaStore\n  }, props));\n}\nfunction useRenderRoot(isGlobalPanel) {\n  useEffect(() => {\n    if (isGlobalPanel && !rootInitialized) {\n      if (!rootEl) {\n        rootEl = document.getElementById('leva__root') || Object.assign(document.createElement('div'), {\n          id: 'leva__root'\n        });\n\n        if (document.body) {\n          document.body.appendChild(rootEl);\n          ReactDOM.render(React.createElement(Leva, {\n            isRoot: true\n          }), rootEl);\n        }\n      }\n\n      rootInitialized = true;\n    }\n  }, [isGlobalPanel]);\n}\n\nconst _excluded = [\"store\"];\nfunction LevaPanel(_ref) {\n  let {\n    store\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const parentStore = useStoreContext();\n\n  const _store = store === undefined ? parentStore : store;\n\n  return React.createElement(LevaRoot, _extends({\n    store: _store\n  }, props));\n}\n\nfunction parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  let schema;\n  let folderName = undefined;\n  let folderSettings;\n  let hookSettings;\n  let deps;\n\n  if (typeof schemaOrFolderName === 'string') {\n    folderName = schemaOrFolderName;\n    schema = settingsOrDepsOrSchema;\n\n    if (Array.isArray(depsOrSettingsOrFolderSettings)) {\n      deps = depsOrSettingsOrFolderSettings;\n    } else {\n      if (depsOrSettingsOrFolderSettings) {\n        if ('store' in depsOrSettingsOrFolderSettings) {\n          hookSettings = depsOrSettingsOrFolderSettings;\n          deps = depsOrSettings;\n        } else {\n          folderSettings = depsOrSettingsOrFolderSettings;\n\n          if (Array.isArray(depsOrSettings)) {\n            deps = depsOrSettings;\n          } else {\n            hookSettings = depsOrSettings;\n            deps = depsOrUndefined;\n          }\n        }\n      }\n    }\n  } else {\n    schema = schemaOrFolderName;\n\n    if (Array.isArray(settingsOrDepsOrSchema)) {\n      deps = settingsOrDepsOrSchema;\n    } else {\n      hookSettings = settingsOrDepsOrSchema;\n      deps = depsOrSettingsOrFolderSettings;\n    }\n  }\n\n  return {\n    schema,\n    folderName,\n    folderSettings,\n    hookSettings,\n    deps: deps || []\n  };\n}\n\nfunction useControls(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  const {\n    folderName,\n    schema,\n    folderSettings,\n    hookSettings,\n    deps\n  } = parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined);\n  const schemaIsFunction = typeof schema === 'function';\n  const depsChanged = useRef(false);\n  const firstRender = useRef(true);\n\n  const _schema = useDeepMemo(() => {\n    depsChanged.current = true;\n    const s = typeof schema === 'function' ? schema() : schema;\n    return folderName ? {\n      [folderName]: folder(s, folderSettings)\n    } : s;\n  }, deps);\n\n  const isGlobalPanel = !(hookSettings !== null && hookSettings !== void 0 && hookSettings.store);\n  useRenderRoot(isGlobalPanel);\n  const [store] = useState(() => (hookSettings === null || hookSettings === void 0 ? void 0 : hookSettings.store) || levaStore);\n  const [initialData, mappedPaths] = useMemo(() => store.getDataFromSchema(_schema), [store, _schema]);\n  const [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths] = useMemo(() => {\n    const allPaths = [];\n    const renderPaths = [];\n    const onChangePaths = {};\n    const onEditStartPaths = {};\n    const onEditEndPaths = {};\n    Object.values(mappedPaths).forEach(({\n      path,\n      onChange,\n      onEditStart,\n      onEditEnd,\n      transient\n    }) => {\n      allPaths.push(path);\n\n      if (!!onChange) {\n        onChangePaths[path] = onChange;\n\n        if (!transient) {\n          renderPaths.push(path);\n        }\n      } else {\n        renderPaths.push(path);\n      }\n\n      if (onEditStart) {\n        onEditStartPaths[path] = onEditStart;\n      }\n\n      if (onEditEnd) {\n        onEditEndPaths[path] = onEditEnd;\n      }\n    });\n    return [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths];\n  }, [mappedPaths]);\n  const paths = useMemo(() => store.orderPaths(allPaths), [allPaths, store]);\n  const values = useValuesForPath(store, renderPaths, initialData);\n  const set = useCallback(values => {\n    const _values = Object.entries(values).reduce((acc, [p, v]) => Object.assign(acc, {\n      [mappedPaths[p].path]: v\n    }), {});\n\n    store.set(_values, false);\n  }, [store, mappedPaths]);\n  useEffect(() => {\n    const shouldOverrideSettings = !firstRender.current && depsChanged.current;\n    store.addData(initialData, shouldOverrideSettings);\n    firstRender.current = false;\n    depsChanged.current = false;\n    return () => store.disposePaths(paths);\n  }, [store, paths, initialData]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onChangePaths).forEach(([path, onChange]) => {\n      onChange(store.get(path), path, _objectSpread2({\n        initial: true,\n        get: store.get\n      }, store.getInput(path)));\n      const unsub = store.useStore.subscribe(([value, input]) => onChange(value, path, _objectSpread2({\n        initial: false,\n        get: store.get\n      }, input)), s => {\n        const input = s.data[path];\n        const value = input.disabled ? undefined : input.value;\n        return [value, input];\n      }, shallow);\n      unsubscriptions.push(unsub);\n    });\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [store, onChangePaths]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onEditStartPaths).forEach(([path, onEditStart]) => unsubscriptions.push(store.subscribeToEditStart(path, onEditStart)));\n    Object.entries(onEditEndPaths).forEach(([path, onEditEnd]) => unsubscriptions.push(store.subscribeToEditEnd(path, onEditEnd)));\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [onEditStartPaths, onEditEndPaths, store]);\n  if (schemaIsFunction) return [values, set];\n  return values;\n}\n\nregister(LevaInputs.SELECT, select);\nregister(LevaInputs.IMAGE, image);\nregister(LevaInputs.NUMBER, number$1);\nregister(LevaInputs.COLOR, color);\nregister(LevaInputs.STRING, string);\nregister(LevaInputs.BOOLEAN, boolean);\nregister(LevaInputs.INTERVAL, interval);\nregister(LevaInputs.VECTOR3D, vector3d);\nregister(LevaInputs.VECTOR2D, vector2d);\n\nexport { Leva, LevaPanel, button, buttonGroup, folder, levaStore, monitor, useControls, useCreateStore };\n"]},"metadata":{},"sourceType":"module"}